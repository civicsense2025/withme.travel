/*! For license information please see itinerary-ItineraryItemCard-stories.ebfa356d.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkwithme_travel=self.webpackChunkwithme_travel||[]).push([[6021],{"./components/itinerary/ItineraryItemCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CoreItem:()=>CoreItem,Default:()=>Default,Editable:()=>Editable,Overlay:()=>Overlay,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ItineraryItemCard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),ui_button=__webpack_require__("./components/ui/button.tsx"),smile=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/smile.js"),createLucideIcon=__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js");const CornerDownRight=(0,createLucideIcon.A)("corner-down-right",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]);var ellipsis_vertical=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js"),pencil=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/pencil.js"),trash=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/trash.js");const Copy=(0,createLucideIcon.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var external_link=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/external-link.js"),map_pin=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/map-pin.js"),message_square=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/message-square.js"),x=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),send=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/send.js"),tooltip=__webpack_require__("./components/ui/tooltip.tsx"),utils=__webpack_require__("./lib/utils.ts"),format=__webpack_require__("./node_modules/date-fns/format.js");const CATEGORY_DISPLAY={"Iconic Landmarks":{emoji:"ðŸ›ï¸",label:"Iconic Landmarks",color:"bg-purple-100 dark:bg-purple-950 text-purple-600 dark:text-purple-400"},"Local Secrets":{emoji:"ðŸ”",label:"Local Secrets",color:"bg-violet-100 dark:bg-violet-950 text-violet-600 dark:text-violet-400"},"Cultural Experiences":{emoji:"ðŸŽ­",label:"Cultural Experiences",color:"bg-indigo-100 dark:bg-indigo-950 text-indigo-600 dark:text-indigo-400"},"Outdoor Adventures":{emoji:"ðŸ”ï¸",label:"Outdoor Adventures",color:"bg-emerald-100 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400"},"Food & Drink":{emoji:"ðŸ´",label:"Food & Drink",color:"bg-amber-100 dark:bg-amber-950 text-amber-600 dark:text-amber-400"},Nightlife:{emoji:"ðŸŒ™",label:"Nightlife",color:"bg-blue-100 dark:bg-blue-950 text-blue-600 dark:text-blue-400"},Relaxation:{emoji:"ðŸ§˜",label:"Relaxation",color:"bg-teal-100 dark:bg-teal-950 text-teal-600 dark:text-teal-400"},Shopping:{emoji:"ðŸ›ï¸",label:"Shopping",color:"bg-rose-100 dark:bg-rose-950 text-rose-600 dark:text-rose-400"},Entertainment:{emoji:"ðŸŽ¬",label:"Entertainment",color:"bg-orange-100 dark:bg-orange-950 text-orange-600 dark:text-orange-400"},"Health & Wellness":{emoji:"ðŸ’†",label:"Health & Wellness",color:"bg-lime-100 dark:bg-lime-950 text-lime-600 dark:text-lime-400"},Educational:{emoji:"ðŸ“š",label:"Educational",color:"bg-sky-100 dark:bg-sky-950 text-sky-600 dark:text-sky-400"},Photography:{emoji:"ðŸ“¸",label:"Photography",color:"bg-fuchsia-100 dark:bg-fuchsia-950 text-fuchsia-600 dark:text-fuchsia-400"},Accommodations:{emoji:"ðŸ¨",label:"Accommodations",color:"bg-pink-100 dark:bg-pink-950 text-pink-600 dark:text-pink-400"},Transportation:{emoji:"ðŸš†",label:"Transportation",color:"bg-red-100 dark:bg-red-950 text-red-600 dark:text-red-400"},Other:{emoji:"ðŸ“Œ",label:"Other",color:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"},"Flexible Options":{emoji:"ðŸ”„",label:"Flexible Options",color:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"}},DEFAULT_CATEGORY_DISPLAY={emoji:"ðŸ“Œ",label:"Activity",color:"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400"},ITEM_TYPE_DISPLAY={accommodation:{emoji:"ðŸ¨",label:"Accommodation",color:"bg-blue-100 dark:bg-blue-950 text-blue-600 dark:text-blue-400"},transportation:{emoji:"âœˆï¸",label:"Transportation",color:"bg-emerald-100 dark:bg-emerald-950 text-emerald-600 dark:text-emerald-400"},activity:{emoji:"ðŸŽ¯",label:"Activity",color:"bg-purple-100 dark:bg-purple-950 text-purple-600 dark:text-purple-400"},food:{emoji:"ðŸ½ï¸",label:"Food & Dining",color:"bg-orange-100 dark:bg-orange-950 text-orange-600 dark:text-orange-400"}};var constants_status=__webpack_require__("./utils/constants/status.ts"),proxy=__webpack_require__("./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),avatar=__webpack_require__("./components/ui/avatar.tsx"),use_auth=__webpack_require__("./lib/hooks/use-auth.ts"),popover=__webpack_require__("./components/ui/popover.tsx"),dropdown_menu=__webpack_require__("./components/ui/dropdown-menu.tsx"),ui_textarea=__webpack_require__("./components/ui/textarea.tsx"),scroll_area=__webpack_require__("./components/ui/scroll-area.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");const ALLOWED_EMOJIS=["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ”¥","ðŸ‘Ž","ðŸ‘","âœ¨"],ItineraryItemCard=react.memo((({item,className,dayNumber,onEdit,onDelete,isOverlay=!1,isCoreItem=!1,editable=!1,...props})=>{const{user}=(0,use_auth.A)();var _item_reactions;const[reactions,setReactions]=(0,react.useState)(null!==(_item_reactions=item.reactions)&&void 0!==_item_reactions?_item_reactions:[]),[loadingEmoji,setLoadingEmoji]=(0,react.useState)(null),[reactionPopoverOpen,setReactionPopoverOpen]=(0,react.useState)(!1),[showCommentsSidebar,setShowCommentsSidebar]=(0,react.useState)(!1),[isHovered,setIsHovered]=(0,react.useState)(!1),[comments,setComments]=(0,react.useState)([]),[newComment,setNewComment]=(0,react.useState)(""),[replyingTo,setReplyingTo]=(0,react.useState)(null),[isLoadingComments,setIsLoadingComments]=(0,react.useState)(!1),[commentsCount,setCommentsCount]=(0,react.useState)(0),reactionsByEmoji=ALLOWED_EMOJIS.reduce(((acc,emoji)=>(acc[emoji]=reactions.filter((r=>r.emoji===emoji)),acc)),{});ALLOWED_EMOJIS.find((emoji=>{var _reactionsByEmoji_emoji;return null===(_reactionsByEmoji_emoji=reactionsByEmoji[emoji])||void 0===_reactionsByEmoji_emoji?void 0:_reactionsByEmoji_emoji.some((r=>r.user_id===(null==user?void 0:user.id)))}));react.useEffect((()=>{var _item_reactions;setReactions(null!==(_item_reactions=item.reactions)&&void 0!==_item_reactions?_item_reactions:[])}),[item.id,item.reactions]);const handleEmojiClick=async emoji=>{if(user){setLoadingEmoji(emoji);try{const res=await fetch(`/api/trips/${item.trip_id}/itinerary/${item.id}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji})});if(res.ok){const data=await res.json();setReactions(data.reactions||[])}setReactionPopoverOpen(!1)}finally{setLoadingEmoji(null)}}},fetchComments=async()=>{if(item.id&&item.trip_id)try{setIsLoadingComments(!0);const res=await fetch(`/api/trips/${item.trip_id}/itinerary/${item.id}/comments`);if(res.ok){const data=await res.json();setComments(data.comments||[]),setCommentsCount(data.count||0)}}catch(e){console.error("Error fetching comments:",e)}finally{setIsLoadingComments(!1)}},handlePostComment=async()=>{if(newComment.trim()&&user&&item.id&&item.trip_id)try{(await fetch(`/api/trips/${item.trip_id}/itinerary/${item.id}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:newComment,parent_id:replyingTo})})).ok&&(setNewComment(""),setReplyingTo(null),await fetchComments())}catch(e){console.error("Error posting comment:",e)}},handleCommentReaction=async(commentId,emoji)=>{if(user&&item.id&&item.trip_id)try{(await fetch(`/api/trips/${item.trip_id}/itinerary/${item.id}/comments/${commentId}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji})})).ok&&await fetchComments()}catch(e){console.error("Error reacting to comment:",e)}};react.useEffect((()=>{showCommentsSidebar&&fetchComments()}),[showCommentsSidebar]);const renderComment=(comment,isReply=!1)=>{var _comment_user_name,_comment_replies;return(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("mb-4",isReply&&"ml-8 mt-2"),children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-2",children:[(0,jsx_runtime.jsxs)(avatar.eu,{className:"h-6 w-6",children:[(0,jsx_runtime.jsx)(avatar.BK,{src:comment.user.avatar_url||void 0}),(0,jsx_runtime.jsx)(avatar.q5,{children:(null===(_comment_user_name=comment.user.name)||void 0===_comment_user_name?void 0:_comment_user_name.charAt(0))||"U"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"bg-muted p-2 rounded-md",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-start",children:[(0,jsx_runtime.jsx)("p",{className:"text-xs font-medium",children:comment.user.name||"Anonymous User"}),(0,jsx_runtime.jsx)("span",{className:"text-[10px] text-muted-foreground",children:new Date(comment.created_at).toLocaleDateString()})]}),(0,jsx_runtime.jsx)("p",{className:"text-sm mt-1",children:comment.content})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center mt-1 gap-1",children:[(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>setReplyingTo(comment.id),className:"h-6 px-2 text-xs",children:"Reply"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[ALLOWED_EMOJIS.slice(0,4).map((emoji=>{var _comment_reactions,_comment_reactions1;const reactionCount=(null===(_comment_reactions=comment.reactions)||void 0===_comment_reactions?void 0:_comment_reactions.filter((r=>r.emoji===emoji)).length)||0,userReacted=null===(_comment_reactions1=comment.reactions)||void 0===_comment_reactions1?void 0:_comment_reactions1.some((r=>r.emoji===emoji&&r.user_id===(null==user?void 0:user.id)));return 0!==reactionCount||userReacted?(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>handleCommentReaction(comment.id,emoji),className:(0,utils.cn)("h-5 px-1 py-0 rounded-full text-xs",userReacted?"bg-primary/10 hover:bg-primary/20 text-primary":"hover:bg-muted"),children:[emoji," ",reactionCount>0?reactionCount:""]},emoji):null})),(0,jsx_runtime.jsxs)(popover.AM,{children:[(0,jsx_runtime.jsx)(popover.Wv,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"sm",className:"h-5 w-5 rounded-full p-0",children:[(0,jsx_runtime.jsx)(smile.A,{className:"h-3 w-3 text-muted-foreground"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Add reaction"})]})}),(0,jsx_runtime.jsx)(popover.hl,{className:"w-auto p-1",align:"start",children:(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-4 gap-1",children:ALLOWED_EMOJIS.map((emoji=>(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>handleCommentReaction(comment.id,emoji),className:"h-7 w-7 p-0",children:emoji},emoji)))})})]})]})]})]})]}),!isReply&&(null===(_comment_replies=comment.replies)||void 0===_comment_replies?void 0:_comment_replies.map((reply=>renderComment(reply,!0)))),replyingTo===comment.id&&(0,jsx_runtime.jsxs)("div",{className:"ml-8 mt-2 flex gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"w-6 flex justify-center",children:(0,jsx_runtime.jsx)(CornerDownRight,{className:"h-4 w-4 text-muted-foreground"})}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)(ui_textarea.T,{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:"Write a reply...",className:"min-h-[60px] text-sm p-2"}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-2 mt-1",children:[(0,jsx_runtime.jsx)(ui_button.$,{size:"sm",variant:"ghost",onClick:()=>setReplyingTo(null),className:"h-7",children:"Cancel"}),(0,jsx_runtime.jsx)(ui_button.$,{size:"sm",onClick:handlePostComment,className:"h-7",children:"Reply"})]})]})]})]},comment.id)},address=item.address||item.location,formatTime=timeString=>{if(!timeString)return"";try{const[hours,minutes]=timeString.split(":").map(Number),date=new Date;return date.setHours(hours),date.setMinutes(minutes),(0,format.GP)(date,"h:mm a")}catch(e){return timeString}},scheduleTime=item.start_time?item.end_time?`${formatTime(item.start_time)} - ${formatTime(item.end_time)}`:formatTime(item.start_time):null,bgColorClass=(0,utils.cn)("bg-card hover:bg-card/90 dark:bg-card/90 dark:hover:bg-card/80",isCoreItem&&"bg-card/95 standard-border-l-4 border-l-primary/30");let displayInfo=DEFAULT_CATEGORY_DISPLAY;if(item.category){const categoryKey=Object.values(constants_status.Tk).find((cat=>cat===item.category));categoryKey&&categoryKey in CATEGORY_DISPLAY&&(displayInfo=CATEGORY_DISPLAY[categoryKey])}else if(item.type){const type=item.type.toLowerCase();"accommodation"!==type&&"transportation"!==type&&"activity"!==type&&"food"!==type||(displayInfo=ITEM_TYPE_DISPLAY[type])}const displayCategory=item.formattedCategory||item.category,displayCategoryFormatted=displayCategory?"string"==typeof displayCategory&&displayCategory.includes("_")?displayCategory.split("_").map((word=>word.charAt(0).toUpperCase()+word.slice(1).toLowerCase())).join(" "):displayCategory:"Unspecified",details=[{label:"Type",value:item.type||"Unspecified"},{label:"Category",value:displayCategoryFormatted},{label:"Status",value:item.status||"Unspecified"},{label:"Notes",value:item.notes}].filter((detail=>detail.value)),{onVote,onStatusChange,...restProps}=props;var _item_title;return(0,jsx_runtime.jsxs)(proxy.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},layout:!0,transition:{type:"spring",stiffness:600,damping:22,mass:.5},className:(0,utils.cn)("rounded-lg shadow-sm relative standard-border transition-all",bgColorClass,isOverlay&&"opacity-50",className),...restProps,tabIndex:isOverlay?-1:void 0,"aria-hidden":!!isOverlay||void 0,onMouseEnter:()=>setIsHovered(!0),onMouseLeave:()=>setIsHovered(!1),children:[dayNumber&&(0,jsx_runtime.jsx)("div",{className:"absolute -left-3 -top-3 rounded-full bg-primary text-primary-foreground w-8 h-8 flex items-center justify-center shadow-md transform -rotate-12 opacity-70",children:(0,jsx_runtime.jsx)("span",{className:"text-xs font-semibold",children:dayNumber})}),(0,jsx_runtime.jsxs)("div",{className:"p-3 flex items-center justify-between border-b border-border/20",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("w-8 h-8 rounded-lg flex-shrink-0 flex items-center justify-center",displayInfo.color),children:(0,jsx_runtime.jsx)("span",{className:"text-base","aria-hidden":"true",children:displayInfo.emoji})}),(0,jsx_runtime.jsxs)(tooltip.m_,{children:[(0,jsx_runtime.jsx)(tooltip.k$,{asChild:!0,children:(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-base truncate cursor-help max-w-[180px]",title:null!==(_item_title=item.title)&&void 0!==_item_title?_item_title:"Untitled",children:item.title||"Untitled Item"})}),(0,jsx_runtime.jsx)(tooltip.ZI,{className:"bg-popover border border-border shadow-md w-64",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-2 p-1",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold",children:item.title||"Untitled Item"}),details.map(((detail,i)=>detail.value&&(0,jsx_runtime.jsxs)("div",{className:"text-xs",children:[(0,jsx_runtime.jsxs)("span",{className:"font-medium",children:[detail.label,":"]})," ",detail.value]},i)))]})})]}),scheduleTime&&(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:scheduleTime})]}),!isOverlay&&editable&&(0,jsx_runtime.jsxs)(dropdown_menu.rI,{children:[(0,jsx_runtime.jsx)(dropdown_menu.ty,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"icon",className:(0,utils.cn)("h-8 w-8 rounded-full p-0",isHovered?"opacity-100":"opacity-0"),children:[(0,jsx_runtime.jsx)(ellipsis_vertical.A,{className:"h-4 w-4 text-muted-foreground"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,jsx_runtime.jsxs)(dropdown_menu.SQ,{align:"end",className:"w-[160px]",children:[(0,jsx_runtime.jsxs)(dropdown_menu._2,{onClick:e=>{e.stopPropagation(),onEdit&&onEdit()},children:[(0,jsx_runtime.jsx)(pencil.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,jsx_runtime.jsxs)(dropdown_menu._2,{onClick:e=>{e.stopPropagation(),onDelete&&onDelete()},className:"text-destructive focus:text-destructive",children:[(0,jsx_runtime.jsx)(trash.A,{className:"mr-2 h-4 w-4"}),"Delete"]}),(0,jsx_runtime.jsx)(dropdown_menu.mB,{}),(0,jsx_runtime.jsxs)(dropdown_menu._2,{children:[(0,jsx_runtime.jsx)(Copy,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),item.url&&(0,jsx_runtime.jsx)(dropdown_menu._2,{asChild:!0,children:(0,jsx_runtime.jsxs)("a",{href:item.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[(0,jsx_runtime.jsx)(external_link.A,{className:"mr-2 h-4 w-4"}),"Open Link"]})})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"p-3",children:[item.description&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-primary/90 mb-2",children:item.description}),item.notes&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground",children:item.notes})]}),(0,jsx_runtime.jsxs)("div",{className:"p-3 pt-0 flex items-center justify-between border-t border-border/20 mt-2",children:[address&&(0,jsx_runtime.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",title:address,children:[(0,jsx_runtime.jsx)(map_pin.A,{className:"w-3 h-3 flex-shrink-0 opacity-70"}),(0,jsx_runtime.jsx)("span",{className:"truncate max-w-[180px]",children:address})]}),!address&&(0,jsx_runtime.jsx)("div",{className:"w-1 h-1"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[Object.entries(reactionsByEmoji).map((([emoji,emojiReactions])=>{if(0===emojiReactions.length)return null;const userReacted=emojiReactions.some((r=>r.user_id===(null==user?void 0:user.id)));return(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>handleEmojiClick(emoji),className:(0,utils.cn)("h-6 px-1.5 py-0 rounded-full text-xs",userReacted?"bg-primary/10 hover:bg-primary/20 text-primary":"hover:bg-muted"),children:[emoji," ",emojiReactions.length]},emoji)})),(0,jsx_runtime.jsxs)(popover.AM,{open:reactionPopoverOpen,onOpenChange:setReactionPopoverOpen,children:[(0,jsx_runtime.jsx)(popover.Wv,{asChild:!0,children:(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full p-0",children:[(0,jsx_runtime.jsx)(smile.A,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Add reaction"})]})}),(0,jsx_runtime.jsx)(popover.hl,{className:"w-auto p-2",align:"end",children:(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-4 gap-1",children:ALLOWED_EMOJIS.map((emoji=>(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"icon",onClick:()=>handleEmojiClick(emoji),disabled:loadingEmoji===emoji,className:"h-8 w-8 p-0",children:emoji},emoji)))})})]}),(0,jsx_runtime.jsxs)(ui_button.$,{variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),setShowCommentsSidebar(!showCommentsSidebar)},className:(0,utils.cn)("h-6 w-6 rounded-full p-0",showCommentsSidebar&&"bg-primary/10 text-primary"),children:[(0,jsx_runtime.jsx)(message_square.A,{className:"h-3.5 w-3.5"}),(0,jsx_runtime.jsx)("span",{className:"sr-only",children:"Comments"}),commentsCount>0&&(0,jsx_runtime.jsx)("span",{className:"absolute -top-1 -right-1 bg-primary text-primary-foreground text-[10px] rounded-full w-4 h-4 flex items-center justify-center",children:commentsCount>9?"9+":commentsCount})]})]})]}),(0,jsx_runtime.jsx)(AnimatePresence.N,{children:showCommentsSidebar&&(0,jsx_runtime.jsx)(proxy.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-border/20 overflow-hidden",children:(0,jsx_runtime.jsxs)("div",{className:"p-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,jsx_runtime.jsx)("h4",{className:"text-sm font-medium",children:"Comments"}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>setShowCommentsSidebar(!1),children:(0,jsx_runtime.jsx)(x.A,{className:"h-3.5 w-3.5"})})]}),(0,jsx_runtime.jsx)(scroll_area.F,{className:"max-h-[250px]",children:isLoadingComments?(0,jsx_runtime.jsx)("div",{className:"py-8 text-center text-muted-foreground text-sm",children:"Loading comments..."}):0===comments.length?(0,jsx_runtime.jsx)("div",{className:"py-8 text-center text-muted-foreground text-sm",children:"No comments yet. Be the first to comment!"}):(0,jsx_runtime.jsx)("div",{className:"space-y-2 py-2",children:comments.filter((c=>!c.replies)).map((comment=>renderComment(comment)))})}),!replyingTo&&(0,jsx_runtime.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,jsx_runtime.jsx)(ui_textarea.T,{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:"Write a comment...",className:"min-h-[60px] text-sm"}),(0,jsx_runtime.jsx)(ui_button.$,{size:"sm",className:"h-full",onClick:handlePostComment,disabled:!newComment.trim(),children:(0,jsx_runtime.jsx)(send.A,{className:"h-4 w-4"})})]})]})})})]})}));ItineraryItemCard.displayName="ItineraryItemCard",ItineraryItemCard.__docgenInfo={description:"Redesigned Itinerary Item Card with header, content, footer layout\nSimilar to group idea cards but styled according to the visual guide",methods:[],displayName:"ItineraryItemCard",props:{item:{required:!0,tsType:{name:"ExtendedItineraryItem"},description:""},className:{required:!1,tsType:{name:"string"},description:""},dayNumber:{required:!1,tsType:{name:"number"},description:""},onEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOverlay:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isCoreItem:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},editable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const ItineraryItemCard_stories={title:"Itinerary/ItineraryItemCard",component:ItineraryItemCard,parameters:{layout:"centered"},tags:["autodocs"]},mockItem={id:"item-1",trip_id:"trip-123",title:"Visit Sagrada Familia",created_at:"2024-07-01T10:00:00Z",section_id:null,type:null,item_type:null,date:"2024-07-01",start_time:"10:00",end_time:"12:00",location:"Barcelona",address:"Carrer de Mallorca, 401",place_id:null,latitude:41.4036,longitude:2.1744,estimated_cost:25,currency:"EUR",notes:"Buy tickets in advance",description:"Tour the iconic basilica.",updated_at:null,created_by:"user-1",is_custom:!1,day_number:1,category:"Iconic Landmarks",status:"suggested",position:1,duration_minutes:120,cover_image_url:null,creator_profile:void 0,votes:{up:3,down:0,upVoters:[],downVoters:[],userVote:null},user_vote:null,creatorProfile:null,place:null,formattedCategory:"Iconic Landmarks"},Default={args:{item:mockItem}},Editable={args:{item:mockItem,editable:!0}},CoreItem={args:{item:mockItem,isCoreItem:!0}},Overlay={args:{item:mockItem,isOverlay:!0}},__namedExportsOrder=["Default","Editable","CoreItem","Overlay"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    item: mockItem\n  }\n}",...Default.parameters?.docs?.source}}},Editable.parameters={...Editable.parameters,docs:{...Editable.parameters?.docs,source:{originalSource:"{\n  args: {\n    item: mockItem,\n    editable: true\n  }\n}",...Editable.parameters?.docs?.source}}},CoreItem.parameters={...CoreItem.parameters,docs:{...CoreItem.parameters?.docs,source:{originalSource:"{\n  args: {\n    item: mockItem,\n    isCoreItem: true\n  }\n}",...CoreItem.parameters?.docs?.source}}},Overlay.parameters={...Overlay.parameters,docs:{...Overlay.parameters?.docs,source:{originalSource:"{\n  args: {\n    item: mockItem,\n    isOverlay: true\n  }\n}",...Overlay.parameters?.docs?.source}}}},"./components/ui/scroll-area.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>ScrollArea});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-scroll-area/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const ScrollArea=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.bL,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("relative overflow-hidden",className),...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.LM,{className:"h-full w-full rounded-[inherit]",children}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ScrollBar,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.OK,{})]})));ScrollArea.displayName=_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.bL.displayName;const ScrollBar=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,orientation="vertical",...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.VM,{ref,orientation,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex touch-none select-none transition-colors","vertical"===orientation&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===orientation&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",className),...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.lr,{className:"relative flex-1 rounded-full bg-border"})})));ScrollBar.displayName=_radix_ui_react_scroll_area__WEBPACK_IMPORTED_MODULE_3__.VM.displayName,ScrollArea.__docgenInfo={description:"",methods:[]},ScrollBar.__docgenInfo={description:"",methods:[],props:{orientation:{defaultValue:{value:"'vertical'",computed:!1},required:!1}}}},"./components/ui/textarea.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>Textarea});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const textareaVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("flex min-h-[80px] w-full border bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{variant:{default:"border-input","travel-purple":"border-travel-purple focus-visible:ring-travel-purple","travel-blue":"border-travel-blue focus-visible:ring-travel-blue","travel-pink":"border-travel-pink focus-visible:ring-travel-pink","travel-yellow":"border-travel-yellow focus-visible:ring-travel-yellow","travel-mint":"border-travel-mint focus-visible:ring-travel-mint","travel-peach":"border-travel-peach focus-visible:ring-travel-peach",success:"border-emerald-500 focus-visible:ring-emerald-500",warning:"border-amber-400 focus-visible:ring-amber-400",info:"border-blue-500 focus-visible:ring-blue-500",error:"border-red-500 focus-visible:ring-red-500"},radius:{sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full",none:"rounded-none"}},defaultVariants:{variant:"default",radius:"md"}}),Textarea=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,variant,radius,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("textarea",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(textareaVariants({variant,radius,className})),ref,...props})));Textarea.displayName="Textarea",Textarea.__docgenInfo={description:'Textarea component with design system variants.\n\n@example\n<Textarea variant="travel-purple" radius="lg" />',methods:[],displayName:"Textarea",composes:["VariantProps"]}},"./components/ui/tooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bc:()=>TooltipProvider,ZI:()=>TooltipContent,k$:()=>TooltipTrigger,m_:()=>Tooltip});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-tooltip/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const TooltipProvider=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.Kq,Tooltip=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.bL,TooltipTrigger=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.l9,TooltipContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,sideOffset=4,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.UC,{ref,sideOffset,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",className),role:"tooltip","aria-live":"polite",...props})));TooltipContent.displayName=_radix_ui_react_tooltip__WEBPACK_IMPORTED_MODULE_3__.UC.displayName,TooltipContent.__docgenInfo={description:"Content of the tooltip that appears when the trigger is hovered or focused.",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}}},"./lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{cn:()=>cn});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tailwind-merge/dist/bundle-mjs.mjs");__webpack_require__("./node_modules/console-browserify/index.js");function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.$)(inputs))}new Set(["a","an","and","the","in","on","at","for","to","of","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","its","our","their","mine","yours","hers","ours","theirs","am","is","are","was","were","be","being","been","have","has","had","having","do","does","did","doing","will","would","shall","should","can","could","may","might","must","about","above","after","again","against","all","any","around","as","because","before","below","between","both","but","by","down","during","each","few","from","further","here","how","into","if","just","more","most","no","nor","not","only","or","other","out","over","same","so","some","still","such","than","that","then","there","these","this","those","through","under","until","up","very","what","when","where","which","while","who","whom","why","with","within","without"])},"./node_modules/lucide-react/dist/esm/createLucideIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>createLucideIcon});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const toPascalCase=string=>{const camelCase=(string=>string.replace(/^([A-Z])|[\s-_]+(\w)/g,((match,p1,p2)=>p2?p2.toUpperCase():p1.toLowerCase())))(string);return camelCase.charAt(0).toUpperCase()+camelCase.slice(1)},mergeClasses=(...classes)=>classes.filter(((className,index,array)=>Boolean(className)&&""!==className.trim()&&array.indexOf(className)===index)).join(" ").trim(),hasA11yProp=props=>{for(const prop in props)if(prop.startsWith("aria-")||"role"===prop||"title"===prop)return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=(0,react.forwardRef)((({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,className="",children,iconNode,...rest},ref)=>(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:mergeClasses("lucide",className),...!children&&!hasA11yProp(rest)&&{"aria-hidden":"true"},...rest},[...iconNode.map((([tag,attrs])=>(0,react.createElement)(tag,attrs))),...Array.isArray(children)?children:[children]]))),createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)((({className,...props},ref)=>{return(0,react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${string=toPascalCase(iconName),string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${iconName}`,className),...props});var string}));return Component.displayName=toPascalCase(iconName),Component}},"./node_modules/lucide-react/dist/esm/icons/check.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Check});const Check=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},"./node_modules/lucide-react/dist/esm/icons/external-link.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ExternalLink});const ExternalLink=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},"./node_modules/lucide-react/dist/esm/icons/trash.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Trash});const Trash=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},"./utils/constants/status.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LB:()=>GROUP_PLAN_IDEA_TYPE,LR:()=>PERMISSION_STATUSES,Tk:()=>ITINERARY_CATEGORIES});const ITINERARY_CATEGORIES={ICONIC_LANDMARKS:"Iconic Landmarks",LOCAL_SECRETS:"Local Secrets",CULTURAL_EXPERIENCES:"Cultural Experiences",OUTDOOR_ADVENTURES:"Outdoor Adventures",FOOD_AND_DRINK:"Food & Drink",ACCOMMODATIONS:"Accommodations",TRANSPORTATION:"Transportation",SHOPPING:"Shopping",ENTERTAINMENT:"Entertainment",HEALTH_AND_WELLNESS:"Health & Wellness",EDUCATIONAL:"Educational",RELAXATION:"Relaxation",NIGHTLIFE:"Nightlife",PHOTOGRAPHY:"Photography",OTHER:"Other",FLEXIBLE_OPTIONS:"Flexible Options",ACCOMMODATION:"Accommodations",ATTRACTION:"Attractions"},PERMISSION_STATUSES={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"},GROUP_PLAN_IDEA_TYPE={DESTINATION:"destination",DATE:"date",ACTIVITY:"activity",BUDGET:"budget",OTHER:"other",QUESTION:"question",NOTE:"note",PLACE:"place"}}}]);