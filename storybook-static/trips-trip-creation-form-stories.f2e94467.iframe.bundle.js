"use strict";(self.webpackChunkwithme_travel=self.webpackChunkwithme_travel||[]).push([[4282],{"./components/trips/trip-creation-form.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DarkMode:()=>DarkMode,Default:()=>Default,LightMode:()=>LightMode,__namedExportsOrder:()=>__namedExportsOrder,default:()=>trip_creation_form_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),plane_landing=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/plane-landing.js"),calendar=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/calendar.js"),users=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/users.js"),card=__webpack_require__("./components/ui/card.tsx"),ui_button=__webpack_require__("./components/ui/button.tsx"),input=__webpack_require__("./components/ui/input.tsx"),ui_form=__webpack_require__("./components/ui/form.tsx"),date_picker=__webpack_require__("./components/ui/date-picker.tsx"),city_chips_autocomplete_input=__webpack_require__("./components/cities/city-chips-autocomplete-input.tsx"),badge=__webpack_require__("./components/ui/badge.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");const tripSchema=lib.Ik({name:lib.Yj().min(3,"Trip name must be at least 3 characters"),date_range:lib.Ik({from:lib.p6().nullable(),to:lib.p6().nullable()})});function TripCreationForm({onDestinationSelect,onTripCreated,onCancel,initialDestination,mode="light"}){const router=(0,navigation.useRouter)(),[selectedCities,setSelectedCities]=(0,react.useState)(initialDestination?[initialDestination]:[]),[isLoading,setIsLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),[website,setWebsite]=(0,react.useState)(""),form=(0,index_esm.mN)({resolver:(0,zod.u)(tripSchema),defaultValues:{name:"",date_range:{from:null,to:null}}}),handleSubmit=async values=>{if(!isLoading){setError(null),setIsLoading(!0);try{var _values_name;if(!(null===(_values_name=values.name)||void 0===_values_name?void 0:_values_name.trim()))throw new Error("Trip name is required");if(0===selectedCities.length)throw new Error("Please select at least one destination");const startDate=values.date_range.from,endDate=values.date_range.to,response=await fetch("/api/trips",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:values.name.trim(),start_date:startDate?startDate.toISOString():null,end_date:endDate?endDate.toISOString():null,cities:selectedCities,website})});if(!response.ok){const data=await response.json();throw new Error(data.error||"Failed to create trip")}const{trip}=await response.json();if(!(null==trip?void 0:trip.id))throw new Error("No trip ID returned from server");onTripCreated&&onTripCreated(trip.id),router.push(`/trips/${trip.id}`)}catch(err){console.error("Error creating trip:",err),setError(err instanceof Error?err.message:"Failed to create trip"),setIsLoading(!1)}}};return(0,jsx_runtime.jsxs)(card.Zp,{variant:"default",className:"dark"===mode?"dark":"light",children:[(0,jsx_runtime.jsxs)(card.aR,{children:[(0,jsx_runtime.jsx)(card.ZB,{children:"✈️ Let's Plan Your Trip"}),(0,jsx_runtime.jsx)(card.BT,{children:"Fill in the basics to get started, and we'll help you build your perfect itinerary."})]}),(0,jsx_runtime.jsx)(card.Wu,{children:(0,jsx_runtime.jsx)(ui_form.lV,{form,children:(0,jsx_runtime.jsxs)("form",{onSubmit:form.handleSubmit(handleSubmit),className:"space-y-6",children:[(0,jsx_runtime.jsx)("div",{className:"hidden",children:(0,jsx_runtime.jsx)(input.p,{id:"website",value:website,onChange:e=>setWebsite(e.target.value)})}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"name",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{children:[(0,jsx_runtime.jsxs)(ui_form.lR,{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(plane_landing.A,{className:"h-4 w-4"}),(0,jsx_runtime.jsx)("span",{children:"What are you calling this adventure?"})]}),(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(input.p,{placeholder:"Summer in Europe, Girls Weekend, Family Reunion...",...field,disabled:isLoading,autoFocus:!0})})]})}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)(ui_form.lR,{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(calendar.A,{className:"h-4 w-4"}),(0,jsx_runtime.jsx)("span",{children:"When are you traveling?"})]}),(0,jsx_runtime.jsx)(ui_form.zB,{control:form.control,name:"date_range",render:({field})=>(0,jsx_runtime.jsx)(ui_form.eI,{className:"flex flex-col",children:(0,jsx_runtime.jsx)(date_picker.l,{date:field.value,setDate:newDate=>field.onChange(newDate),disabled:isLoading,placeholder:"Select dates (optional)"})})})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)(ui_form.lR,{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(users.A,{className:"h-4 w-4"}),(0,jsx_runtime.jsx)("span",{children:"Where are you and your crew headed?"})]}),(0,jsx_runtime.jsx)(city_chips_autocomplete_input.N,{selectedCities,onChange:cities=>{setSelectedCities(cities),cities.length>0&&onDestinationSelect&&onDestinationSelect(cities[0].name)},disabled:isLoading,label:"",placeholder:"Search for places to visit...",emptyMessage:"Type to search for destinations or select from suggestions"})]}),error&&(0,jsx_runtime.jsx)(badge.E,{variant:"error",className:"px-3 py-2 text-sm font-normal w-full justify-start",children:error})]})})}),(0,jsx_runtime.jsx)(card.wL,{children:(0,jsx_runtime.jsxs)("div",{className:"flex justify-end space-x-4 w-full",children:[(0,jsx_runtime.jsx)(ui_button.$,{type:"button",variant:"outline",onClick:onCancel||(()=>router.push("/trips")),disabled:isLoading,children:"Cancel"}),(0,jsx_runtime.jsx)(ui_button.$,{onClick:form.handleSubmit(handleSubmit),disabled:isLoading||0===selectedCities.length,children:isLoading?"Creating...":"Create Trip"})]})})]})}TripCreationForm.__docgenInfo={description:"",methods:[],displayName:"TripCreationForm",props:{onDestinationSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(destination: string) => void",signature:{arguments:[{type:{name:"string"},name:"destination"}],return:{name:"void"}}},description:""},onTripCreated:{required:!1,tsType:{name:"signature",type:"function",raw:"(tripId: string) => void",signature:{arguments:[{type:{name:"string"},name:"tripId"}],return:{name:"void"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},initialDestination:{required:!1,tsType:{name:"City"},description:""},mode:{required:!1,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"",defaultValue:{value:"'light'",computed:!1}}}};const trip_creation_form_stories={title:"Product/Features/TripCreationForm",component:TripCreationForm,parameters:{layout:"centered"}},mockProps={onTripCreated:tripId=>alert("Trip created: "+tripId),onDestinationSelect:destination=>alert("Destination selected: "+destination),onCancel:()=>alert("Trip creation cancelled"),initialDestination:{id:"1",name:"Paris",country:"France"},mode:"light"},Default={args:{...mockProps}},LightMode={args:{...mockProps,mode:"light"},parameters:{backgrounds:{default:"light"}}},DarkMode={args:{...mockProps,mode:"dark"},parameters:{backgrounds:{default:"dark"}}},__namedExportsOrder=["Default","LightMode","DarkMode"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...mockProps\n  }\n}",...Default.parameters?.docs?.source}}},LightMode.parameters={...LightMode.parameters,docs:{...LightMode.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...mockProps,\n    mode: 'light' as 'light'\n  },\n  parameters: {\n    backgrounds: {\n      default: 'light'\n    }\n  }\n}",...LightMode.parameters?.docs?.source}}},DarkMode.parameters={...DarkMode.parameters,docs:{...DarkMode.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...mockProps,\n    mode: 'dark' as 'dark'\n  },\n  parameters: {\n    backgrounds: {\n      default: 'dark'\n    }\n  }\n}",...DarkMode.parameters?.docs?.source}}}},"./components/ui/button/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>buttonVariants});const buttonVariants=(0,__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs").F)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}})},"./components/ui/calendar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>Calendar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_barrel_optimize_names_ChevronLeft_ChevronRight_lucide_react__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-left.js")),_barrel_optimize_names_ChevronLeft_ChevronRight_lucide_react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chevron-right.js"),react_day_picker__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react-day-picker/dist/esm/DayPicker.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts"),_components_ui_button_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./components/ui/button/utils.ts");function Calendar({className,classNames,showOutsideDays=!0,...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_day_picker__WEBPACK_IMPORTED_MODULE_4__.h,{showOutsideDays,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("p-3",className),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)((0,_components_ui_button_utils__WEBPACK_IMPORTED_MODULE_3__.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)((0,_components_ui_button_utils__WEBPACK_IMPORTED_MODULE_3__.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...classNames},components:{IconLeft:({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronLeft_ChevronRight_lucide_react__WEBPACK_IMPORTED_MODULE_5__.A,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("h-4 w-4",className),...props}),IconRight:({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ChevronLeft_ChevronRight_lucide_react__WEBPACK_IMPORTED_MODULE_6__.A,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("h-4 w-4",className),...props})},...props})}Calendar.displayName="Calendar",Calendar.__docgenInfo={description:"",methods:[],displayName:"Calendar",props:{showOutsideDays:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./components/ui/date-picker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>DatePicker});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/date-fns/format.js"),_barrel_optimize_names_Calendar_lucide_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/calendar.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts"),_components_ui_button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./components/ui/button.tsx"),_components_ui_calendar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./components/ui/calendar.tsx"),_components_ui_popover__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./components/ui/popover.tsx");function DatePicker({date,setDate,disabled=!1,placeholder="Pick a date range"}){const formattedDate=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((()=>(null==date?void 0:date.from)||(null==date?void 0:date.to)?(null==date?void 0:date.from)&&(null==date?void 0:date.to)?`${(0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_6__.GP)(date.from,"MMM d")} - ${(0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_6__.GP)(date.to,"MMM d, yyyy")}`:(null==date?void 0:date.from)?(0,_barrel_optimize_names_format_date_fns__WEBPACK_IMPORTED_MODULE_6__.GP)(date.from,"MMM d, yyyy"):null:null),[date]);var _date_to;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_5__.AM,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_5__.Wv,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_3__.$,{variant:"outline",className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("w-full justify-start text-left font-normal",!formattedDate&&"text-muted-foreground"),disabled,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Calendar_lucide_react__WEBPACK_IMPORTED_MODULE_7__.A,{className:"mr-2 h-4 w-4"}),formattedDate||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:placeholder})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_popover__WEBPACK_IMPORTED_MODULE_5__.hl,{className:"w-auto p-0",align:"start",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_calendar__WEBPACK_IMPORTED_MODULE_4__.V,{mode:"range",selected:date&&date.from?{from:date.from,to:null!==(_date_to=date.to)&&void 0!==_date_to?_date_to:void 0}:void 0,onSelect:range=>{var _range_from,_range_to;setDate({from:null!==(_range_from=null==range?void 0:range.from)&&void 0!==_range_from?_range_from:null,to:null!==(_range_to=null==range?void 0:range.to)&&void 0!==_range_to?_range_to:null})},initialFocus:!0,disabled})})]})}DatePicker.__docgenInfo={description:"",methods:[],displayName:"DatePicker",props:{date:{required:!0,tsType:{name:"DateRange"},description:""},setDate:{required:!0,tsType:{name:"signature",type:"function",raw:"(date: DateRange) => void",signature:{arguments:[{type:{name:"DateRange"},name:"date"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Pick a date range'",computed:!1}}}}},"./components/ui/popover.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AM:()=>Popover,Wv:()=>PopoverTrigger,hl:()=>PopoverContent});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_popover__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-popover/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const Popover=_radix_ui_react_popover__WEBPACK_IMPORTED_MODULE_3__.bL,PopoverTrigger=_radix_ui_react_popover__WEBPACK_IMPORTED_MODULE_3__.l9,PopoverContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,align="center",sideOffset=4,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_popover__WEBPACK_IMPORTED_MODULE_3__.ZL,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_popover__WEBPACK_IMPORTED_MODULE_3__.UC,{ref,align,sideOffset,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",className),...props})})));PopoverContent.displayName=_radix_ui_react_popover__WEBPACK_IMPORTED_MODULE_3__.UC.displayName,PopoverContent.__docgenInfo={description:"",methods:[],props:{align:{defaultValue:{value:"'center'",computed:!1},required:!1},sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}}}}]);