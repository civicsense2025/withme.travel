"use strict";(self.webpackChunkwithme_travel=self.webpackChunkwithme_travel||[]).push([[9220],{"./app/trips/components/EditTripForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dark:()=>Dark,Default:()=>Default,Light:()=>Light,PublicTrip:()=>PublicTrip,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EditTripForm_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),routes=__webpack_require__("./utils/constants/routes.ts"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.mjs"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),ui_button=__webpack_require__("./components/ui/button.tsx"),input=__webpack_require__("./components/ui/input.tsx"),label=__webpack_require__("./components/ui/label.tsx"),card=__webpack_require__("./components/ui/card.tsx"),use_toast=__webpack_require__("./hooks/use-toast.ts"),tag_input=__webpack_require__("./components/ui/tag-input.tsx"),ui_alert=__webpack_require__("./components/ui/alert.tsx"),radio_group=__webpack_require__("./components/ui/radio-group.tsx"),ui_form=__webpack_require__("./components/ui/form.tsx"),loader_circle=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/loader-circle.js"),camera=(__webpack_require__("./lib/utils.ts"),__webpack_require__("./node_modules/lucide-react/dist/esm/icons/camera.js")),map_pin=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/map-pin.js"),city_chips_autocomplete_input=__webpack_require__("./components/cities/city-chips-autocomplete-input.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");const MapboxGeocoderComponent=(0,react.lazy)((()=>Promise.all([__webpack_require__.e(2266),__webpack_require__.e(2522)]).then(__webpack_require__.bind(__webpack_require__,"./components/maps/mapbox-geocoder.tsx")))),privacyOptions=[{value:"private",label:"Private",description:"Only invited members can see this trip."},{value:"shared_with_link",label:"Shared with Link",description:"Anyone with the link can view a simplified version."},{value:"public",label:"Public",description:"Anyone can find and view a simplified version."}],editTripFormSchema=lib.z.object({name:lib.z.string().min(3,"Name must be at least 3 characters").max(100),description:lib.z.string().nullable().optional(),start_date:lib.z.string().nullable().optional(),end_date:lib.z.string().nullable().optional(),tags:lib.z.array(lib.z.string()).optional().nullable(),destination_id:lib.z.string().uuid("Please select a valid destination").nullable().optional(),cover_image_url:lib.z.string().url("Must be a valid URL").nullable().optional(),privacy_setting:lib.z.enum(["private","shared_with_link","public"])});function EditTripForm({trip,initialDestinationName,onSave,onClose,onChangeCover}){const{toast}=(0,use_toast.dj)(),[isLoading,setIsLoading]=(0,react.useState)(!1),[isLookingUpDest,setIsLookingUpDest]=(0,react.useState)(!1),[lookupError,setLookupError]=(0,react.useState)(null),[destinationDisplay,setDestinationDisplay]=(0,react.useState)(null!=initialDestinationName?initialDestinationName:void 0),[existingTags,setExistingTags]=(0,react.useState)([]),[destinationId,setDestinationId]=(0,react.useState)(trip.destination_id||null),[selectedCities,setSelectedCities]=(0,react.useState)([]),[loadingCities,setLoadingCities]=(0,react.useState)(!1);var _trip_tags,_trip_privacy_setting;const formMethods=(0,index_esm.mN)({resolver:(0,zod.u)(editTripFormSchema),defaultValues:{name:trip.name||"",start_date:trip.start_date?trip.start_date.split("T")[0]:"",end_date:trip.end_date?trip.end_date.split("T")[0]:"",tags:null!==(_trip_tags=trip.tags)&&void 0!==_trip_tags?_trip_tags:[],cover_image_url:trip.cover_image_url||null,privacy_setting:null!==(_trip_privacy_setting=trip.privacy_setting)&&void 0!==_trip_privacy_setting?_trip_privacy_setting:"private"}}),{control,handleSubmit,reset,setValue,formState:{errors},register}=formMethods;(0,react.useEffect)((()=>{(async()=>{try{const response=await fetch(routes.QQ.TAGS);if(!response.ok)throw new Error("Failed to fetch tags");const tagsData=await response.json();setExistingTags(tagsData)}catch(error){console.error("Error fetching tags:",error),toast({title:"Error",description:"Could not load existing tags.",variant:"destructive"})}})()}),[toast]),(0,react.useEffect)((()=>{(async()=>{if(trip.id){setLoadingCities(!0);try{const response=await fetch(`/api/trips/${trip.id}/cities`);if(!response.ok)throw new Error("Failed to fetch trip cities");const data=await response.json();data.cities&&Array.isArray(data.cities)&&setSelectedCities(data.cities.map((city=>{var _city_city,_city_city1,_city_city2,_city_city3;return{id:null===(_city_city=city.city)||void 0===_city_city?void 0:_city_city.id,name:(null===(_city_city1=city.city)||void 0===_city_city1?void 0:_city_city1.name)||"Unknown",country:(null===(_city_city2=city.city)||void 0===_city_city2?void 0:_city_city2.country)||"",state_province:null===(_city_city3=city.city)||void 0===_city_city3?void 0:_city_city3.admin_name,...city.city}})).filter((city=>city.id)))}catch(error){console.error("Error fetching trip cities:",error)}finally{setLoadingCities(!1)}}})()}),[trip.id]),(0,react.useEffect)((()=>{var _trip_tags,_trip_privacy_setting;reset({name:trip.name||"",start_date:trip.start_date?trip.start_date.split("T")[0]:"",end_date:trip.end_date?trip.end_date.split("T")[0]:"",tags:null!==(_trip_tags=trip.tags)&&void 0!==_trip_tags?_trip_tags:[],cover_image_url:trip.cover_image_url||null,privacy_setting:null!==(_trip_privacy_setting=trip.privacy_setting)&&void 0!==_trip_privacy_setting?_trip_privacy_setting:"private"}),setDestinationDisplay(null!=initialDestinationName?initialDestinationName:void 0)}),[trip,reset,initialDestinationName]);return(0,jsx_runtime.jsxs)(card.Zp,{children:[(0,jsx_runtime.jsx)(card.aR,{children:(0,jsx_runtime.jsxs)(card.ZB,{children:["Edit Trip: ",trip.name]})}),(0,jsx_runtime.jsx)(index_esm.Op,{...formMethods,children:(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmit((async data=>{setIsLoading(!0);try{const saveData={...data,destination_id:destinationId,cities:selectedCities};console.log("Calling onSave with:",saveData),await onSave(saveData)}catch(error){console.error("Error saving trip via onSave prop:",error)}finally{setIsLoading(!1)}})),className:"space-y-6 p-1",children:[(0,jsx_runtime.jsxs)(card.Wu,{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"name",children:"Trip Name"}),(0,jsx_runtime.jsx)(input.p,{id:"name",...register("name")}),errors.name&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-destructive",children:errors.name.message})]}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"start_date",children:"Start Date"}),(0,jsx_runtime.jsx)(input.p,{id:"start_date",type:"date",...register("start_date")}),errors.start_date&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-destructive",children:errors.start_date.message})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"end_date",children:"End Date"}),(0,jsx_runtime.jsx)(input.p,{id:"end_date",type:"date",...register("end_date")}),errors.end_date&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-destructive",children:errors.end_date.message})]})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex justify-between items-center",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"cover_image_url",children:"Cover Image URL"}),onChangeCover&&(0,jsx_runtime.jsxs)(ui_button.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{onClose(),onChangeCover()},children:[(0,jsx_runtime.jsx)(camera.A,{className:"mr-2 h-4 w-4"}),"Select Image"]})]}),(0,jsx_runtime.jsx)(input.p,{id:"cover_image_url",type:"url",...register("cover_image_url"),placeholder:"https://..."}),errors.cover_image_url&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-destructive",children:errors.cover_image_url.message})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"destination-search",children:"Primary Destination"}),(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)("p",{children:"Loading MapboxGeocoderComponent..."}),children:(0,jsx_runtime.jsx)(MapboxGeocoderComponent,{onResult:result=>{(async result=>{var _result_geometry;if(setLookupError(null),!(result&&result.id&&result.text&&(null===(_result_geometry=result.geometry)||void 0===_result_geometry?void 0:_result_geometry.coordinates)))return setValue("destination_id",null),setDestinationId(null),void setDestinationDisplay(void 0);setDestinationDisplay(result.place_name||result.text),setIsLookingUpDest(!0);try{var _result_properties;const payload={mapbox_id:result.id,name:result.text,address:(null===(_result_properties=result.properties)||void 0===_result_properties?void 0:_result_properties.address)||result.place_name,latitude:result.geometry.coordinates[1],longitude:result.geometry.coordinates[0],context:result.context||null},response=await fetch("/api/destinations/lookup-or-create",{method:"POST",headers:{"Content-Type":"application/json",credentials:"include"},body:JSON.stringify(payload)}),destData=await response.json();if(!response.ok){const errorMessage=destData.error||`API error: ${response.status} ${response.statusText}`;throw new Error(errorMessage)}if(!destData||"object"!=typeof destData)throw new Error("Invalid API response: Expected an object");if(!destData.destination)throw new Error("Invalid API response: Missing destination property");if(!destData.destination.id||"string"!=typeof destData.destination.id)throw console.error("API response missing valid destination.id:",destData),new Error("Could not retrieve destination ID from API response.");setValue("destination_id",destData.destination.id),setDestinationId(destData.destination.id)}catch(error){console.error("Error looking up/creating destination:",error),setLookupError(error.message),setValue("destination_id",null),setDestinationId(null),setDestinationDisplay(void 0)}finally{setIsLookingUpDest(!1)}})(result)},initialValue:destinationDisplay,options:{placeholder:"Search city, address, or place..."}})}),isLookingUpDest&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:"Looking up destination..."}),lookupError&&(0,jsx_runtime.jsx)(ui_alert.Fc,{variant:"destructive",className:"mt-2",children:(0,jsx_runtime.jsx)(ui_alert.TN,{children:lookupError})})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,jsx_runtime.jsx)(map_pin.A,{className:"h-4 w-4 text-muted-foreground"}),(0,jsx_runtime.jsx)(label.J,{children:"Trip Cities"})]}),(0,jsx_runtime.jsx)(city_chips_autocomplete_input.N,{selectedCities,onChange:cities=>{setSelectedCities(cities)},disabled:isLoading||loadingCities,placeholder:"Add cities to your itinerary...",emptyMessage:"Add cities you plan to visit on this trip (beyond the primary destination)"}),(0,jsx_runtime.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select all cities you plan to visit during this trip. This helps with itinerary planning."})]}),(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"tags",children:"Tags"}),(0,jsx_runtime.jsx)(index_esm.xI,{name:"tags",control,render:({field})=>(0,jsx_runtime.jsx)(tag_input.F,{...field,placeholder:"Enter tags (e.g., Budget, Adventure)",value:field.value||[],onChange:newTagTexts=>{field.onChange(newTagTexts)}})}),errors.tags&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-destructive",children:errors.tags.message})]}),(0,jsx_runtime.jsx)(ui_form.zB,{control,name:"privacy_setting",render:({field})=>(0,jsx_runtime.jsxs)(ui_form.eI,{className:"space-y-3",children:[(0,jsx_runtime.jsx)(ui_form.lR,{className:"text-base font-semibold",children:"Trip Visibility"}),(0,jsx_runtime.jsx)(ui_form.Rr,{children:"Control who can see your trip plan."}),(0,jsx_runtime.jsx)(radio_group.z,{onValueChange:field.onChange,defaultValue:field.value,className:"flex flex-col space-y-1",children:privacyOptions.map((option=>(0,jsx_runtime.jsxs)(ui_form.eI,{className:"flex items-center space-x-3 space-y-0",children:[(0,jsx_runtime.jsx)(ui_form.MJ,{children:(0,jsx_runtime.jsx)(radio_group.C,{value:option.value})}),(0,jsx_runtime.jsxs)(ui_form.lR,{className:"font-normal flex flex-col",children:[(0,jsx_runtime.jsx)("span",{children:option.label}),(0,jsx_runtime.jsx)(ui_form.Rr,{className:"text-xs",children:option.description})]})]},option.value)))}),errors.privacy_setting&&(0,jsx_runtime.jsx)("p",{className:"text-sm text-destructive pt-1",children:errors.privacy_setting.message})]})})]}),(0,jsx_runtime.jsxs)(card.wL,{className:"justify-between",children:[(0,jsx_runtime.jsx)(ui_button.$,{type:"button",variant:"ghost",onClick:onClose,disabled:isLoading,children:"Cancel"}),(0,jsx_runtime.jsxs)(ui_button.$,{type:"submit",disabled:isLoading,children:[isLoading?(0,jsx_runtime.jsx)(loader_circle.A,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Save Changes"]})]})]})})]})}EditTripForm.__docgenInfo={description:"",methods:[],displayName:"EditTripForm",props:{trip:{required:!0,tsType:{name:"intersection",raw:"Pick<\n  Trip,\n  'id' | 'name' | 'start_date' | 'end_date' | 'destination_id' | 'cover_image_url'\n> & {\n  privacy_setting: PrivacySetting | null;\n  tags?: string[];\n}",elements:[{name:"Pick",elements:[{name:"Trip"},{name:"union",raw:"'id' | 'name' | 'start_date' | 'end_date' | 'destination_id' | 'cover_image_url'",elements:[{name:"literal",value:"'id'"},{name:"literal",value:"'name'"},{name:"literal",value:"'start_date'"},{name:"literal",value:"'end_date'"},{name:"literal",value:"'destination_id'"},{name:"literal",value:"'cover_image_url'"}]}],raw:"Pick<\n  Trip,\n  'id' | 'name' | 'start_date' | 'end_date' | 'destination_id' | 'cover_image_url'\n>"},{name:"signature",type:"object",raw:"{\n  privacy_setting: PrivacySetting | null;\n  tags?: string[];\n}",signature:{properties:[{key:"privacy_setting",value:{name:"union",raw:"PrivacySetting | null",elements:[{name:"union",raw:"'private' | 'shared_with_link' | 'public'",elements:[{name:"literal",value:"'private'"},{name:"literal",value:"'shared_with_link'"},{name:"literal",value:"'public'"}]},{name:"null"}],required:!0}},{key:"tags",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}}]}}]},description:""},initialDestinationName:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onSave:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: EditTripFormValues & { destination_id?: string | null; cities?: City[] }) => void",signature:{arguments:[{type:{name:"intersection",raw:"EditTripFormValues & { destination_id?: string | null; cities?: City[] }",elements:[{name:"z.infer",elements:[{name:"editTripFormSchema"}],raw:"z.infer<typeof editTripFormSchema>"},{name:"signature",type:"object",raw:"{ destination_id?: string | null; cities?: City[] }",signature:{properties:[{key:"destination_id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"cities",value:{name:"Array",elements:[{name:"City"}],raw:"City[]",required:!1}}]}}]},name:"data"}],return:{name:"void"}}},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onChangeCover:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const EditTripForm_stories={title:"Trip Features/EditTripForm",component:EditTripForm,parameters:{layout:"centered"},tags:["autodocs"]},mockTrip={id:"trip-1",name:"Summer in Spain",start_date:"2024-07-01",end_date:"2024-07-14",destination_id:"dest-1",cover_image_url:"https://images.unsplash.com/photo-1506744038136-46273834b3fb",privacy_setting:"private",tags:["beach","food"]},Default={args:{trip:mockTrip,initialDestinationName:"Barcelona",onSave:data=>{alert("Saved! "+JSON.stringify(data))},onClose:()=>alert("Closed!")}},PublicTrip={args:{...Default.args,trip:{...mockTrip,privacy_setting:"public"}}},Light={parameters:{backgrounds:{default:"light"}}},Dark={parameters:{backgrounds:{default:"dark"}}},__namedExportsOrder=["Default","PublicTrip","Light","Dark"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    trip: mockTrip,\n    initialDestinationName: 'Barcelona',\n    onSave: mockOnSave,\n    onClose: mockOnClose\n  }\n}",...Default.parameters?.docs?.source}}},PublicTrip.parameters={...PublicTrip.parameters,docs:{...PublicTrip.parameters?.docs,source:{originalSource:"{\n  args: {\n    ...Default.args,\n    trip: {\n      ...mockTrip,\n      privacy_setting: 'public' as const\n    }\n  }\n}",...PublicTrip.parameters?.docs?.source}}},Light.parameters={...Light.parameters,docs:{...Light.parameters?.docs,source:{originalSource:"{\n  parameters: {\n    backgrounds: {\n      default: 'light'\n    }\n  }\n}",...Light.parameters?.docs?.source}}},Dark.parameters={...Dark.parameters,docs:{...Dark.parameters?.docs,source:{originalSource:"{\n  parameters: {\n    backgrounds: {\n      default: 'dark'\n    }\n  }\n}",...Dark.parameters?.docs?.source}}}},"./components/ui/alert.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Fc:()=>Alert,TN:()=>AlertDescription,XL:()=>AlertTitle});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const alertVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive","travel-purple":"bg-travel-purple/10 border-travel-purple text-travel-purple-foreground","travel-blue":"bg-travel-blue/10 border-travel-blue text-travel-blue-foreground","travel-pink":"bg-travel-pink/10 border-travel-pink text-travel-pink-foreground","travel-yellow":"bg-travel-yellow/10 border-travel-yellow text-travel-yellow-foreground","travel-mint":"bg-travel-mint/10 border-travel-mint text-travel-mint-foreground","travel-peach":"bg-travel-peach/10 border-travel-peach text-travel-peach-foreground",success:"bg-emerald-50 border-emerald-400 text-emerald-900",warning:"bg-amber-50 border-amber-400 text-amber-900",info:"bg-blue-50 border-blue-400 text-blue-900",error:"bg-red-50 border-red-400 text-red-900"}},defaultVariants:{variant:"default"}}),Alert=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,variant,isImportant,titleId,descriptionId,...props},ref)=>{const ariaAttributes=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((()=>"error"===variant||"warning"===variant||"destructive"===variant?{role:"alert"}:{role:"status","aria-live":isImportant?"assertive":"polite"}),[variant,isImportant]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(alertVariants({variant}),className),"aria-labelledby":titleId,"aria-describedby":descriptionId,...ariaAttributes,...props})}));Alert.displayName="Alert";const AlertTitle=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h5",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("mb-1 font-medium leading-none tracking-tight",className),...props})));AlertTitle.displayName="AlertTitle";const AlertDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm [&_p]:leading-relaxed",className),...props})));AlertDescription.displayName="AlertDescription",Alert.__docgenInfo={description:'Accessible Alert component with design system variants.\nUses appropriate ARIA roles and live regions based on content importance.\n\n@example\n<Alert variant="success">\n  <AlertTitle>Success!</AlertTitle>\n  <AlertDescription>Your changes have been saved.</AlertDescription>\n</Alert>\n\n@example\n<Alert\n  variant="error"\n  isImportant={true}\n  titleId="payment-error-title"\n  descriptionId="payment-error-desc"\n>\n  <AlertTitle id="payment-error-title">Payment failed</AlertTitle>\n  <AlertDescription id="payment-error-desc">\n    Your payment could not be processed. Please try again.\n  </AlertDescription>\n</Alert>',methods:[],displayName:"Alert",props:{isImportant:{required:!1,tsType:{name:"boolean"},description:"Whether the alert content is important enough to use assertive announcements"},titleId:{required:!1,tsType:{name:"string"},description:"ID of the title element for ARIA labeling"},descriptionId:{required:!1,tsType:{name:"string"},description:"ID of the description element for ARIA descriptions"}},composes:["VariantProps"]},AlertTitle.__docgenInfo={description:"",methods:[],displayName:"AlertTitle"},AlertDescription.__docgenInfo={description:"",methods:[],displayName:"AlertDescription"}},"./components/ui/radio-group.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>RadioGroupItem,z:()=>RadioGroup});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_radio_group__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-radio-group/dist/index.mjs"),_barrel_optimize_names_Circle_lucide_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/circle.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const RadioGroup=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_radio_group__WEBPACK_IMPORTED_MODULE_3__.bL,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("grid gap-2",className),...props,ref})));RadioGroup.displayName=_radix_ui_react_radio_group__WEBPACK_IMPORTED_MODULE_3__.bL.displayName;const RadioGroupItem=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_radio_group__WEBPACK_IMPORTED_MODULE_3__.q7,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",className),...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_radio_group__WEBPACK_IMPORTED_MODULE_3__.C1,{className:"flex items-center justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Circle_lucide_react__WEBPACK_IMPORTED_MODULE_4__.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})));RadioGroupItem.displayName=_radix_ui_react_radio_group__WEBPACK_IMPORTED_MODULE_3__.q7.displayName,RadioGroup.__docgenInfo={description:"",methods:[]},RadioGroupItem.__docgenInfo={description:"",methods:[]}},"./components/ui/tag-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>TagInput});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_ui_input__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./components/ui/input.tsx");const TagInput=({value,onChange,placeholder="Add a tag",existingTags=[]})=>{const[inputValue,setInputValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[suggestions,setSuggestions]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),containerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),addTag=tag=>{const trimmedTag=tag.trim();trimmedTag&&!value.some((t=>t.toLowerCase()===trimmedTag.toLowerCase()))&&onChange([...value,trimmedTag]),setInputValue(""),setSuggestions([])},removeTag=tagToRemove=>onChange(value.filter((tag=>tag.toLowerCase()!==tagToRemove.toLowerCase())));return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{const handleClickOutside=event=>{containerRef.current&&!containerRef.current.contains(event.target)&&setSuggestions([])};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{ref:containerRef,className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-wrap gap-2 border border-input bg-background p-2 rounded-md min-h-[40px]",children:[value.map(((tag,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center bg-secondary text-secondary-foreground rounded px-2 py-0.5 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:tag}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:()=>removeTag(tag),className:"ml-1.5 text-muted-foreground hover:text-foreground focus:outline-none","aria-label":`Remove ${tag}`,children:"×"})]},index))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_2__.p,{value:inputValue,onChange:e=>{const currentInput=e.target.value;if(setInputValue(currentInput),currentInput.trim()){const filtered=existingTags.filter((tag=>tag.name.toLowerCase().includes(currentInput.toLowerCase())&&!value.some((t=>t.toLowerCase()===tag.name.toLowerCase()))));setSuggestions(filtered)}else setSuggestions([])},onKeyDown:e=>{if("Enter"!==e.key&&","!==e.key||!inputValue.trim())"Backspace"===e.key&&!inputValue&&value.length>0&&removeTag(value[value.length-1]);else{e.preventDefault();const tagToAdd=inputValue.trim().replace(/,$/,"");addTag(tagToAdd)}},placeholder:0===value.length?placeholder:"",className:"flex-1 min-w-[120px] border-none focus:ring-0 focus-visible:ring-0 focus-visible:ring-offset-0 h-auto p-0 bg-transparent shadow-none"})]}),suggestions.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("ul",{className:"absolute z-10 w-full mt-1 bg-card border border-border rounded-md shadow-lg max-h-40 overflow-y-auto",children:suggestions.map((tag=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{className:"px-3 py-2 cursor-pointer hover:bg-accent hover:text-accent-foreground text-sm",onClick:()=>(tag=>addTag(tag.name))(tag),onMouseDown:e=>e.preventDefault(),children:tag.name},tag.id)))})]})};TagInput.__docgenInfo={description:"",methods:[],displayName:"TagInput",props:{value:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(tags: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"tags"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Add a tag'",computed:!1}},existingTags:{required:!1,tsType:{name:"Array",elements:[{name:"Tag"}],raw:"Tag[]"},description:"",defaultValue:{value:"[]",computed:!1}}}}},"./hooks/use-toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dj:()=>useToast,oR:()=>toast});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");let count=0;const toastTimeouts=new Map,addToRemoveQueue=toastId=>{if(toastTimeouts.has(toastId))return;const timeout=setTimeout((()=>{toastTimeouts.delete(toastId),dispatch({type:"REMOVE_TOAST",toastId})}),1e6);toastTimeouts.set(toastId,timeout)},reducer=(state,action)=>{switch(action.type){case"ADD_TOAST":return{...state,toasts:[action.toast,...state.toasts].slice(0,1)};case"UPDATE_TOAST":return{...state,toasts:state.toasts.map((t=>t.id===action.toast.id?{...t,...action.toast}:t))};case"DISMISS_TOAST":{const{toastId}=action;return toastId?addToRemoveQueue(toastId):state.toasts.forEach((toast=>addToRemoveQueue(toast.id))),{...state,toasts:state.toasts.map((t=>t.id===toastId||void 0===toastId?{...t,open:!1}:t))}}case"REMOVE_TOAST":return void 0===action.toastId?{...state,toasts:[]}:{...state,toasts:state.toasts.filter((t=>t.id!==action.toastId))}}},listeners=[];let memoryState={toasts:[]};function dispatch(action){memoryState=reducer(memoryState,action),listeners.forEach((listener=>listener(memoryState)))}function toast({...props}){const id=function genId(){return count=(count+1)%Number.MAX_SAFE_INTEGER,count.toString()}(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:id});return dispatch({type:"ADD_TOAST",toast:{...props,id,open:!0,onOpenChange:open=>{open||dismiss()}}}),{id,dismiss,update:props=>dispatch({type:"UPDATE_TOAST",toast:{...props,id}})}}function useToast(){const[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(memoryState);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(listeners.push(setState),()=>{const index=listeners.indexOf(setState);index>-1&&listeners.splice(index,1)})),[state]),{...state,toast,dismiss:toastId=>dispatch({type:"DISMISS_TOAST",toastId})}}},"./utils/constants/routes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QQ:()=>API_ROUTES,di:()=>PAGE_ROUTES});const API_ROUTES={TRIPS:"/api/trips",TRIP_DETAILS:tripId=>`/api/trips/${tripId}`,TRIP_MEMBERS:tripId=>`/api/trips/${tripId}/members`,TRIP_ITINERARY:tripId=>`/api/trips/${tripId}/itinerary`,ITINERARY_ITEM:(tripId,itemId)=>`/api/trips/${tripId}/itinerary/${itemId}`,TRIP_BUDGET:tripId=>`/api/trips/${tripId}/budget`,BUDGET_ITEM:(tripId,itemId)=>`/api/trips/${tripId}/budget/${itemId}`,COLLABORATIVE_NOTES:tripId=>`/api/trips/${tripId}/notes`,TRIP_MEMBER_INVITE:tripId=>`/api/trips/${tripId}/members/invite`,TRIP_TAGS:tripId=>`/api/trips/${tripId}/tags`,TRIP_ITINERARY_REORDER:tripId=>`/api/trips/${tripId}/itinerary/reorder`,TRIP_VOTE:tripId=>`/api/trips/${tripId}/vote`,TRIP_TRAVEL_TIMES:tripId=>`/api/trips/${tripId}/travel-times`,TRIP_APPLY_TEMPLATE:(tripId,templateId)=>`/api/trips/${tripId}/apply-template/${templateId}`,ITINERARY_ITEM_VOTE:(tripId,itemId)=>`/api/trips/${tripId}/itinerary/${itemId}/vote`,ITINERARIES:"/api/itineraries",ITINERARY_DETAILS:slug=>`/api/itineraries/${slug}`,APPLY_TEMPLATE:slug=>`/api/itineraries/${slug}/use`,DESTINATIONS:"/api/destinations",DESTINATION_DETAILS:id=>`/api/destinations/${id}`,DESTINATION_SEARCH:query=>`/api/destinations/search?q=${encodeURIComponent(query)}`,DESTINATION_REVIEWS:id=>`/api/destinations/${id}/reviews`,DESTINATION_RELATED_TRIPS:id=>`/api/destinations/${id}/related-trips`,DESTINATION_BY_ID:id=>`/api/destinations/by-id/${id}`,DESTINATIONS_BY_CITY:city=>`/api/destinations/by-city/${encodeURIComponent(city)}`,DESTINATION_LOOKUP_OR_CREATE:"/api/destinations/lookup-or-create",PLACE_LOOKUP_OR_CREATE:"/api/places/lookup-or-create",CITY_SUGGESTIONS:query=>`/api/destinations/search/cities?query=${encodeURIComponent(query)}`,LOCATION_SUGGESTIONS:query=>`/api/mapbox/search?q=${encodeURIComponent(query)}`,TAGS:"/api/tags",TAGS_WITH_COUNTS:"/api/tags?withCounts=true",FEEDBACK_SUBMIT:"/api/feedback/submit",UNSPLASH_SEARCH:query=>`/api/images/search-unsplash?query=${encodeURIComponent(query)}`,PEXELS_SEARCH:query=>`/api/images/search-pexels?query=${encodeURIComponent(query)}`,RANDOM_DESTINATION_IMAGE:"/api/images/random-destination",EXPORT_CALENDAR:tripId=>`/api/trips/${tripId}/export-calendar`,LIKES:"/api/likes",LIKE_TRIP:tripId=>`/api/likes?tripId=${tripId}`,LIKE_DESTINATION:destinationId=>`/api/likes?destinationId=${destinationId}`,USERS:"/api/users",PROFILES:"/api/profiles",TRIP_FORMS:tripId=>`/api/trips/${tripId}/forms`,TRIP_ACCESS_REQUEST:tripId=>`/api/trips/${tripId}/request-access`,TRIP_EXPENSES:tripId=>`/api/trips/${tripId}/expenses`,TRIP_EXPENSE:(tripId,expenseId)=>`/api/trips/${tripId}/expenses/${expenseId}`,PUBLIC_TRIP:slug=>`/api/trips/public/${slug}`,CREATE_TRIP_WITH_DEFAULTS:"/api/trips/create-with-defaults",SCRAPE_URL:tripId=>`/api/trips/${tripId}/itinerary/scrape-url`,AUTH_LOGIN:"/api/auth/login",AUTH_LOGOUT:"/api/auth/logout",AUTH_SIGNUP:"/api/auth/signup",AUTH_ME:"/api/auth/me",AUTH_CLEAR_COOKIES:"/api/auth/clear-cookies",AUTH_FORGOT_PASSWORD:"/api/auth/forgot-password",AUTH_RESET_PASSWORD:"/api/auth/reset-password",NOTIFICATIONS_COUNT:"/api/notifications/count",ADMIN_STATS:"/api/admin/stats",DEBUG_AUTH_STATUS:"/api/debug/auth-status",GOOGLE_MAPS_PARSE:"/api/google-maps/parse",ITINERARY_TEMPLATES:"/api/itineraries",ITINERARY_TEMPLATE_DETAILS:id=>`/api/itineraries/${id}`,ITINERARY_TEMPLATE_SECTIONS:id=>`/api/itineraries/${id}/sections`,ITINERARY_TEMPLATE_ITEMS:(templateId,sectionId)=>`/api/itineraries/${templateId}/sections/${sectionId}/items`,VALIDATE_ITINERARY_TEMPLATE:id=>`/api/itineraries/${id}/validate`,PLACES:"/api/places",PLACE_DETAILS:id=>`/api/places/${id}`,PLACE_REVIEWS:id=>`/api/places/${id}/reviews`,PERMISSION_REQUESTS:tripId=>`/api/trips/${tripId}/permissions`,USER_PROFILE:id=>`/api/profiles/${id}`,PUBLIC_TRIP_DETAILS:slug=>`/api/trips/public/${slug}`,LIBRARY:"/api/library",LIBRARY_TEMPLATE:id=>`/api/library/${id}`,REFERRALS:"/api/referrals",TRIP_REVIEWS:"/api/trip-reviews",GROUPS:{LIST:"/api/groups",DETAIL:id=>`/api/groups/${id}`,CREATE:"/api/groups",UPDATE:id=>`/api/groups/${id}`,DELETE:id=>`/api/groups/${id}`,MEMBERS:id=>`/api/groups/${id}/members`,JOIN:id=>`/api/groups/${id}/join`,INVITE:id=>`/api/groups/${id}/invite`},GROUP_PLANS:{LIST:groupId=>`/api/groups/${groupId}/plans`,DETAIL:(groupId,planId)=>`/api/groups/${groupId}/plans/${planId}`,CREATE:groupId=>`/api/groups/${groupId}/plans`,UPDATE:(groupId,planId)=>`/api/groups/${groupId}/plans/${planId}`,DELETE:(groupId,planId)=>`/api/groups/${groupId}/plans/${planId}`},GROUP_PLAN_IDEAS:{LIST:groupId=>`/api/groups/${groupId}/ideas`,DETAIL:(groupId,ideaId)=>`/api/groups/${groupId}/ideas/${ideaId}`,CREATE:groupId=>`/api/groups/${groupId}/ideas`,UPDATE:(groupId,ideaId)=>`/api/groups/${groupId}/ideas/${ideaId}`,DELETE:(groupId,ideaId)=>`/api/groups/${groupId}/ideas/${ideaId}`},GROUP_PLAN_IDEA_VOTES:{CREATE:(groupId,ideaId)=>`/api/groups/${groupId}/ideas/${ideaId}/vote`,DELETE:(groupId,ideaId)=>`/api/groups/${groupId}/ideas/${ideaId}/vote`},NOTIFICATIONS:{LIST:"/api/notifications",UPDATE:"/api/notifications",PREFERENCES:"/api/notifications/preferences",HISTORY:"/api/notifications/history",COUNT:"/api/notifications/count",DEEP_LINK:"/api/notifications/deep-link",CLICK:"/api/notifications/click",ANALYTICS:"/api/notifications/analytics"},FRIENDS:{REQUEST:"/api/friends/request",RESPOND:"/api/friends/respond",REQUESTS:"/api/friends/requests",LIST:"/api/friends/list",UNFRIEND:"/api/friends/unfriend"},RESEARCH:{CREATE_STUDY:"/api/admin/research/create-study",GENERATE_LINK:"/api/admin/research/generate-link",EXPORT_DATA:"/api/admin/research/export-data",SUBMIT_RESPONSE:"/api/research/submit-response",TRACK_EVENT:"/api/research/track-event",SESSION_INFO:"/api/research/session-info",GET_SURVEYS:"/api/research/surveys"}},PAGE_ROUTES={HOME:"/",TRIPS:"/trips",TRIP_DETAILS:tripId=>`/trips/${tripId}`,CREATE_TRIP:"/trips/create",EDIT_TRIP:tripId=>`/trips/${tripId}/edit`,TRIP_ADD_ITEM:tripId=>`/trips/${tripId}/add-item`,TRIP_INVITE:tripId=>`/invite/${tripId}`,PROFILE:username=>`/profile/${username}`,SETTINGS:"/settings",DESTINATIONS:"/destinations",DESTINATION_DETAILS:id=>`/destinations/${id}`,LIBRARY:"/library",LIBRARY_TEMPLATE:id=>`/library/${id}`,LOGIN:"/login",SIGNUP:"/signup",PUBLIC_TRIP:slug=>`/trips/public/${slug}`,ADMIN:{DASHBOARD:"/admin",USERS:"/admin/users",TRIPS:"/admin/trips",ITINERARY_TEMPLATES:"/admin/itineraries",DESTINATIONS:"/admin/destinations"},GROUPS:"/groups",GROUP:id=>`/groups/${id}`,GROUP_PLAN_IDEAS:id=>`/groups/${id}/ideas`,GROUP_PLANS:id=>`/groups/${id}/plans`,GROUP_PLAN:(groupId,planId)=>`/groups/${groupId}/plans/${planId}`,NOTIFICATIONS:{HOME:"/notifications",HISTORY:"/notifications/history",SETTINGS:"/settings/notifications"}}}}]);