"use strict";(self.webpackChunkwithme_travel=self.webpackChunkwithme_travel||[]).push([[8665],{"./components/ui/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>Button});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts"),_spinner__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./components/ui/spinner.tsx"),class_variance_authority__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@radix-ui/react-slot/dist/index.mjs");const buttonVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_4__.F)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-primary text-primary-foreground shadow hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",accent:"bg-accent text-accent-foreground shadow-sm hover:bg-accent/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-muted",ghost:"bg-transparent text-muted-foreground hover:bg-muted hover:text-foreground"},size:{sm:"h-9 px-3 text-sm rounded-md",md:"h-10 px-4 py-2 rounded-md",lg:"h-12 px-6 py-3 text-lg rounded-lg"},width:{auto:"",full:"w-full"}},defaultVariants:{variant:"primary",size:"md",width:"auto"}}),Button=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,variant,size,width,children,disabled,leftIcon,rightIcon,loading=!1,loadingText,ariaDescription,asChild=!1,...props},ref)=>{const Comp=asChild?_radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_5__.DX:"button";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(buttonVariants({variant,size,width}),className),disabled:asChild?void 0:disabled||loading,"aria-disabled":disabled||loading,"aria-description":ariaDescription,ref,...props,children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_spinner__WEBPACK_IMPORTED_MODULE_3__.y,{size:"sm",className:"mr-2"}),loadingText||"Loading..."]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[leftIcon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"mr-2 inline-flex items-center",children:leftIcon}),children,rightIcon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"ml-2 inline-flex items-center",children:rightIcon})]})})}));Button.displayName="Button",Button.__docgenInfo={description:'Button component with multiple variants and sizes, respecting color themes.\nNow supports loading and improved hover states.\nSupports asChild pattern for custom elements.\n\n@example\n<Button variant="primary" size="md" loading loadingText="Submitting...">\n  Submit\n</Button>\n\n<Button asChild>\n  <Link href="/foo">Go to Foo</Link>\n</Button>',methods:[],displayName:"Button",props:{ariaDescription:{required:!1,tsType:{name:"string"},description:"Optional additional description for screen readers"},leftIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Optional leading icon"},rightIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Optional trailing icon"},loading:{required:!1,tsType:{name:"boolean"},description:"Show a loading spinner and disable the button",defaultValue:{value:"false",computed:!1}},loadingText:{required:!1,tsType:{name:"string"},description:"Text to show when loading (replaces children)"},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The content of the button"},asChild:{required:!1,tsType:{name:"boolean"},description:"Render as child (for custom elements like Link)",defaultValue:{value:"false",computed:!1}}},composes:["VariantProps"]}},"./components/ui/spinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>Spinner});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/lucide-react/dist/esm/icons/loader-circle.js")),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");function Spinner({size="md",className}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_3__.A,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("animate-spin text-primary",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[size],className)})}Spinner.__docgenInfo={description:"Simple spinner component for loading states",methods:[],displayName:"Spinner",props:{size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:"Optional size to render",defaultValue:{value:"'md'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Optional additional class names"}}}},"./components/ui/use-toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dj:()=>useToast,oR:()=>toast});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");let count=0;const toastTimeouts=new Map,addToRemoveQueue=toastId=>{if(toastTimeouts.has(toastId))return;const timeout=setTimeout((()=>{toastTimeouts.delete(toastId),dispatch({type:"REMOVE_TOAST",toastId})}),1e6);toastTimeouts.set(toastId,timeout)},reducer=(state,action)=>{switch(action.type){case"ADD_TOAST":return{...state,toasts:[action.toast,...state.toasts].slice(0,1)};case"UPDATE_TOAST":return{...state,toasts:state.toasts.map((t=>t.id===action.toast.id?{...t,...action.toast}:t))};case"DISMISS_TOAST":{const{toastId}=action;return toastId?addToRemoveQueue(toastId):state.toasts.forEach((toast=>addToRemoveQueue(toast.id))),{...state,toasts:state.toasts.map((t=>t.id===toastId||void 0===toastId?{...t,open:!1}:t))}}case"REMOVE_TOAST":return void 0===action.toastId?{...state,toasts:[]}:{...state,toasts:state.toasts.filter((t=>t.id!==action.toastId))}}},listeners=[];let memoryState={toasts:[]};function dispatch(action){memoryState=reducer(memoryState,action),listeners.forEach((listener=>listener(memoryState)))}function toast({...props}){const id=function genId(){return count=(count+1)%Number.MAX_SAFE_INTEGER,count.toString()}(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:id});return dispatch({type:"ADD_TOAST",toast:{...props,id,open:!0,onOpenChange:open=>{open||dismiss()}}}),{id,dismiss,update:props=>dispatch({type:"UPDATE_TOAST",toast:{...props,id}})}}function useToast(){const[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(memoryState);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(listeners.push(setState),()=>{const index=listeners.indexOf(setState);index>-1&&listeners.splice(index,1)})),[state]),{...state,toast,dismiss:toastId=>dispatch({type:"DISMISS_TOAST",toastId})}}},"./stories/admin/EnhancedContentEditor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,EmptyState:()=>EmptyState,WithRichContent:()=>WithRichContent,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EnhancedContentEditor_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),dist=__webpack_require__("./node_modules/@tiptap/react/dist/index.js"),starter_kit_dist=__webpack_require__("./node_modules/@tiptap/starter-kit/dist/index.js"),extension_placeholder_dist=__webpack_require__("./node_modules/@tiptap/extension-placeholder/dist/index.js"),extension_image_dist=__webpack_require__("./node_modules/@tiptap/extension-image/dist/index.js"),extension_link_dist=__webpack_require__("./node_modules/@tiptap/extension-link/dist/index.js"),ui_button=__webpack_require__("./components/ui/button.tsx"),card=__webpack_require__("./components/ui/card.tsx"),use_toast=__webpack_require__("./components/ui/use-toast.ts"),loader_circle=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/loader-circle.js"),bold=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/bold.js"),italic=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/italic.js"),heading_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/heading-2.js"),icons_link=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/link.js"),icons_image=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/image.js"),undo=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/undo.js"),redo=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/redo.js"),save=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/save.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function EnhancedContentEditor({initialContent,contentType,contentId,onSave,onCancel,placeholder="Start typing..."}){const{toast}=(0,use_toast.dj)(),[saving,setSaving]=(0,react.useState)(!1),editor=(0,dist.hG)({extensions:[starter_kit_dist.A,extension_placeholder_dist.A.configure({placeholder}),extension_image_dist.Ay.configure({allowBase64:!0}),extension_link_dist.Ay.configure({openOnClick:!1})],content:initialContent,editorProps:{attributes:{class:"prose dark:prose-invert prose-sm sm:prose-base lg:prose-lg max-w-none focus:outline-none"}}}),saveContent=(0,react.useCallback)((async()=>{if(!editor)return;const content=editor.getHTML();setSaving(!0);try{const response=await fetch(`/api/admin/${contentType}/${contentId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content})});if(!response.ok)throw new Error(`Error: ${response.status}`);toast({title:"Success",description:"Content saved successfully"}),onSave&&onSave(content)}catch(error){console.error("Failed to save content:",error),toast({title:"Error",description:"Failed to save content. Please try again.",variant:"destructive"})}finally{setSaving(!1)}}),[editor,contentType,contentId,toast,onSave]),addImage=(0,react.useCallback)((()=>{if(!editor)return;const url=window.prompt("Enter image URL");url&&editor.chain().focus().setImage({src:url}).run()}),[editor]),setLink=(0,react.useCallback)((()=>{if(!editor)return;const previousUrl=editor.getAttributes("link").href,url=window.prompt("URL",previousUrl);null!==url&&(""!==url?editor.chain().focus().extendMarkRange("link").setLink({href:url}).run():editor.chain().focus().extendMarkRange("link").unsetLink().run())}),[editor]);return editor?(0,jsx_runtime.jsxs)(card.Zp,{className:"shadow-sm",children:[(0,jsx_runtime.jsxs)("div",{className:"border-b p-2 flex flex-wrap gap-1",children:[(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>editor.chain().focus().toggleBold().run(),className:editor.isActive("bold")?"bg-muted":"",children:(0,jsx_runtime.jsx)(bold.A,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>editor.chain().focus().toggleItalic().run(),className:editor.isActive("italic")?"bg-muted":"",children:(0,jsx_runtime.jsx)(italic.A,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>editor.chain().focus().toggleHeading({level:2}).run(),className:editor.isActive("heading",{level:2})?"bg-muted":"",children:(0,jsx_runtime.jsx)(heading_2.A,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:setLink,className:editor.isActive("link")?"bg-muted":"",children:(0,jsx_runtime.jsx)(icons_link.A,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:addImage,children:(0,jsx_runtime.jsx)(icons_image.A,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>editor.chain().focus().undo().run(),disabled:!editor.can().undo(),children:(0,jsx_runtime.jsx)(undo.A,{className:"h-4 w-4"})}),(0,jsx_runtime.jsx)(ui_button.$,{variant:"ghost",size:"sm",onClick:()=>editor.chain().focus().redo().run(),disabled:!editor.can().redo(),children:(0,jsx_runtime.jsx)(redo.A,{className:"h-4 w-4"})})]}),(0,jsx_runtime.jsx)("div",{className:"p-6",children:(0,jsx_runtime.jsx)(dist.$Z,{editor,className:"min-h-[200px] focus:outline-none"})}),(0,jsx_runtime.jsxs)("div",{className:"border-t p-3 flex justify-between",children:[onCancel&&(0,jsx_runtime.jsx)(ui_button.$,{variant:"outline",onClick:onCancel,children:"Cancel"}),(0,jsx_runtime.jsx)("div",{className:"flex gap-2 ml-auto",children:(0,jsx_runtime.jsx)(ui_button.$,{onClick:saveContent,disabled:saving,children:saving?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(loader_circle.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(save.A,{className:"mr-2 h-4 w-4"}),"Save"]})})})]})]}):(0,jsx_runtime.jsx)(card.Zp,{className:"p-6 shadow-sm",children:(0,jsx_runtime.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,jsx_runtime.jsx)(loader_circle.A,{className:"h-6 w-6 animate-spin"})})})}EnhancedContentEditor.__docgenInfo={description:"",methods:[],displayName:"EnhancedContentEditor",props:{initialContent:{required:!0,tsType:{name:"string"},description:""},contentType:{required:!0,tsType:{name:"string"},description:""},contentId:{required:!0,tsType:{name:"string"},description:""},onSave:{required:!1,tsType:{name:"signature",type:"function",raw:"(content: string) => void",signature:{arguments:[{type:{name:"string"},name:"content"}],return:{name:"void"}}},description:""},onCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Start typing...'",computed:!1}}}};const EnhancedContentEditor_stories={title:"Admin/EnhancedContentEditor",component:EnhancedContentEditor,parameters:{layout:"centered"},tags:["autodocs"],decorators:[Story=>(0,jsx_runtime.jsx)("div",{className:"max-w-3xl",children:(0,jsx_runtime.jsx)(Story,{})})]},Default={args:{initialContent:"<p>This is some initial content for the enhanced editor.</p>",contentType:"destinations",contentId:"123",placeholder:"Start typing your content here..."}},WithRichContent={args:{initialContent:"\n      <h2>Travel Guide to Tokyo</h2>\n      <p>Tokyo is a vibrant metropolis that combines the ultramodern and the traditional, from neon-lit skyscrapers to historic temples.</p>\n      <p>The city's <strong>food scene</strong> is legendary, with more Michelin stars than any other city in the world.</p>\n      <h3>Popular Districts</h3>\n      <ul>\n        <li>Shibuya - Famous for its crossing</li>\n        <li>Shinjuku - Entertainment and shopping hub</li>\n        <li>Asakusa - Historic district with temples</li>\n      </ul>\n      <p>Plan to spend at least 5 days exploring this amazing city!</p>\n    ",contentType:"city-guides",contentId:"tokyo",placeholder:"Start writing your city guide..."}},EmptyState={args:{initialContent:"",contentType:"blog-posts",contentId:"new-post",placeholder:"Start crafting your blog post here..."}},__namedExportsOrder=["Default","WithRichContent","EmptyState"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    initialContent: '<p>This is some initial content for the enhanced editor.</p>',\n    contentType: 'destinations',\n    contentId: '123',\n    placeholder: 'Start typing your content here...'\n  }\n}",...Default.parameters?.docs?.source}}},WithRichContent.parameters={...WithRichContent.parameters,docs:{...WithRichContent.parameters?.docs,source:{originalSource:"{\n  args: {\n    initialContent: `\n      <h2>Travel Guide to Tokyo</h2>\n      <p>Tokyo is a vibrant metropolis that combines the ultramodern and the traditional, from neon-lit skyscrapers to historic temples.</p>\n      <p>The city's <strong>food scene</strong> is legendary, with more Michelin stars than any other city in the world.</p>\n      <h3>Popular Districts</h3>\n      <ul>\n        <li>Shibuya - Famous for its crossing</li>\n        <li>Shinjuku - Entertainment and shopping hub</li>\n        <li>Asakusa - Historic district with temples</li>\n      </ul>\n      <p>Plan to spend at least 5 days exploring this amazing city!</p>\n    `,\n    contentType: 'city-guides',\n    contentId: 'tokyo',\n    placeholder: 'Start writing your city guide...'\n  }\n}",...WithRichContent.parameters?.docs?.source}}},EmptyState.parameters={...EmptyState.parameters,docs:{...EmptyState.parameters?.docs,source:{originalSource:"{\n  args: {\n    initialContent: '',\n    contentType: 'blog-posts',\n    contentId: 'new-post',\n    placeholder: 'Start crafting your blog post here...'\n  }\n}",...EmptyState.parameters?.docs?.source}}}}}]);