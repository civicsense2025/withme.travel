"use strict";(self.webpackChunkwithme_travel=self.webpackChunkwithme_travel||[]).push([[7548],{"./app/groups/[id]/plans/[slug]/idea-card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>idea_card});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),card=__webpack_require__("./components/ui/card.tsx"),ui_button=__webpack_require__("./components/ui/button.tsx"),message_circle=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/message-circle.js"),ellipsis_vertical=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js"),pencil=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/pencil.js"),x=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),utils=__webpack_require__("./lib/utils.ts"),dropdown_menu=__webpack_require__("./components/ui/dropdown-menu.tsx"),input=__webpack_require__("./components/ui/input.tsx"),spinner=__webpack_require__("./components/ui/spinner.tsx"),use_toast=__webpack_require__("./components/ui/use-toast.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");var dist=__webpack_require__("./node_modules/frimousse/dist/index.js"),smile=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/smile.js"),send=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/send.js"),refresh_cw=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/refresh-cw.js"),popover=__webpack_require__("./components/ui/popover.tsx"),avatar=__webpack_require__("./components/ui/avatar.tsx"),date_utils=__webpack_require__("./app/groups/[id]/plans/[slug]/utils/date-utils.ts"),dialog=__webpack_require__("./components/ui/dialog.tsx"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),eye_off=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye-off.js"),eye=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/eye.js"),log_in=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/log-in.js"),proxy=__webpack_require__("./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs"),label=__webpack_require__("./components/ui/label.tsx"),hooks_use_toast=__webpack_require__("./hooks/use-toast.ts"),use_auth=__webpack_require__("./lib/hooks/use-auth.ts");const ANIMATION_DURATIONS_fast=.2,ANIMATION_DURATIONS_medium=.4,easings={smooth:[.4,0,.2,1],bounce:[.175,.885,.32,1.275],snappy:[.05,.7,.1,1],spring:[.43,.13,.23,.96]},fadeIn={hidden:{opacity:0},visible:{opacity:1,transition:{duration:ANIMATION_DURATIONS_medium,ease:easings.smooth}},exit:{opacity:0,transition:{duration:ANIMATION_DURATIONS_fast,ease:easings.smooth}}},slideUp={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:ANIMATION_DURATIONS_medium,ease:easings.smooth}},exit:{opacity:0,y:20,transition:{duration:ANIMATION_DURATIONS_fast,ease:easings.smooth}}},staggerContainer={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}},exit:{opacity:0,transition:{staggerChildren:.05,staggerDirection:-1}}};var login_form_console=__webpack_require__("./node_modules/console-browserify/index.js");function LoginForm({onSuccess,primaryButtonText="Sign In",context="default"}){const{signIn,isLoading,user,refreshSession}=(0,use_auth.A)(),router=(0,navigation.useRouter)(),searchParams=(0,navigation.useSearchParams)(),{toast}=(0,hooks_use_toast.dj)(),[email,setEmail]=(0,react.useState)(""),[password,setPassword]=(0,react.useState)(""),[showPassword,setShowPassword]=(0,react.useState)(!1),[localError,setLocalError]=(0,react.useState)(null),[retryCount,setRetryCount]=(0,react.useState)(0),redirectPath=(null==searchParams?void 0:searchParams.get("redirect"))||"/",[decodedRedirectPath,setDecodedRedirectPath]=(0,react.useState)("/");(0,react.useEffect)((()=>{user&&onSuccess&&onSuccess()}),[user,onSuccess]),(0,react.useEffect)((()=>{const urlError=null==searchParams?void 0:searchParams.get("error");if(urlError){const errorMessage=urlError.replace(/_/g," ").toLowerCase();if(setLocalError(errorMessage),toast({title:"Login failed",description:errorMessage,variant:"destructive"}),searchParams){const newParams=new URLSearchParams(searchParams.toString());newParams.delete("error");const newPath=window.location.pathname+(newParams.toString()?`?${newParams.toString()}`:"");router.replace(newPath)}}}),[searchParams,toast,router]),(0,react.useEffect)((()=>{try{let decoded=redirectPath;redirectPath.includes("%")&&(decoded=decodeURIComponent(redirectPath)),decoded.startsWith("/")||decoded.startsWith("http")||(decoded="/"+decoded),setDecodedRedirectPath(decoded)}catch(e){login_form_console.error("Error decoding redirect path:",e),setDecodedRedirectPath("/")}}),[redirectPath]);return(0,jsx_runtime.jsxs)(proxy.P.div,{className:"space-y-6",initial:"hidden",animate:"visible",variants:staggerContainer,children:[(0,jsx_runtime.jsx)(proxy.P.div,{variants:fadeIn,children:(0,jsx_runtime.jsxs)(ui_button.$,{type:"button",variant:"outline",className:"w-full flex items-center gap-2 h-12 rounded-full bg-white border border-gray-200 shadow-sm text-base font-semibold text-gray-900 hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all","aria-label":"Sign in with Google",onClick:async()=>{try{const{createClient}=await __webpack_require__.e(3909).then(__webpack_require__.bind(__webpack_require__,"./utils/supabase/client.ts")),supabase=createClient();if(!supabase)throw new Error("Authentication service not available");const{error}=await supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback?redirect=${encodeURIComponent(decodedRedirectPath)}`}});if(error)throw error}catch(error){login_form_console.error("Google sign in error:",error),setLocalError(error instanceof Error?error.message:"Failed to sign in with Google. Please try again."),toast({title:"Google Sign In Failed",description:error instanceof Error?error.message:"Please try again",variant:"destructive"})}},disabled:isLoading,children:[(0,jsx_runtime.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"mr-2",children:(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("path",{fill:"#4285F4",d:"M24 9.5c3.54 0 6.36 1.53 7.82 2.81l5.77-5.62C34.5 3.7 29.74 1.5 24 1.5 14.98 1.5 7.09 7.6 3.88 15.09l6.91 5.37C12.5 15.13 17.77 9.5 24 9.5z"}),(0,jsx_runtime.jsx)("path",{fill:"#34A853",d:"M46.1 24.5c0-1.64-.15-3.22-.43-4.74H24v9.24h12.4c-.54 2.9-2.18 5.36-4.66 7.04l7.18 5.59C43.91 37.13 46.1 31.3 46.1 24.5z"}),(0,jsx_runtime.jsx)("path",{fill:"#FBBC05",d:"M10.79 28.46A14.5 14.5 0 019.5 24c0-1.56.27-3.07.76-4.46l-6.91-5.37A23.94 23.94 0 001.5 24c0 3.77.9 7.34 2.49 10.46l6.8-6z"}),(0,jsx_runtime.jsx)("path",{fill:"#EA4335",d:"M24 46.5c6.48 0 11.92-2.15 15.89-5.87l-7.18-5.59c-2 1.36-4.56 2.16-8.71 2.16-6.23 0-11.5-5.63-13.21-13.04l-6.8 6C7.09 40.4 14.98 46.5 24 46.5z"})]})}),"Sign in with Google"]})}),(0,jsx_runtime.jsxs)(proxy.P.div,{variants:fadeIn,className:"relative",children:[(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,jsx_runtime.jsx)("span",{className:"w-full border-t"})}),(0,jsx_runtime.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,jsx_runtime.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"or continue with"})})]}),(0,jsx_runtime.jsxs)(proxy.P.form,{onSubmit:async e=>{if(e.preventDefault(),setLocalError(null),email&&password)try{login_form_console.log("Attempting sign in..."),await signIn(email,password),onSuccess&&onSuccess()}catch(error){login_form_console.error("Login error:",error),setRetryCount((prev=>prev+1));let errorMessage="An error occurred during login. Please try again.";error instanceof Error&&(errorMessage=error.message.includes("Invalid login credentials")||error.message.includes("Invalid email or password")?"Invalid email or password. Please try again.":error.message.includes("rate limit")?"Too many login attempts. Please try again later.":error.message),setLocalError(errorMessage),(errorMessage.includes("rate limit")||errorMessage.includes("service"))&&toast({title:"Login Error",description:errorMessage,variant:"destructive"})}else setLocalError("Please enter both email and password")},className:"space-y-4",variants:slideUp,"aria-label":"Sign in form",children:[(0,jsx_runtime.jsxs)(proxy.P.div,{variants:fadeIn,className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"email",className:"sr-only",children:"Email"}),(0,jsx_runtime.jsx)(input.p,{id:"email",type:"email",placeholder:"Email",value:email,onChange:e=>setEmail(e.target.value),required:!0,className:"h-10 rounded-xl px-4 text-base shadow-sm","aria-label":"Email address"})]}),(0,jsx_runtime.jsxs)(proxy.P.div,{variants:fadeIn,className:"space-y-2",children:[(0,jsx_runtime.jsx)(label.J,{htmlFor:"password",className:"sr-only",children:"Password"}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(input.p,{id:"password",type:showPassword?"text":"password",placeholder:"Password",value:password,onChange:e=>setPassword(e.target.value),required:!0,autoComplete:"current-password",className:"h-10 rounded-xl px-4 text-base shadow-sm","aria-label":"Password"}),(0,jsx_runtime.jsx)(ui_button.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>setShowPassword(!showPassword),"aria-label":showPassword?"Hide password":"Show password",children:showPassword?(0,jsx_runtime.jsx)(eye_off.A,{className:"h-4 w-4"}):(0,jsx_runtime.jsx)(eye.A,{className:"h-4 w-4"})})]}),(0,jsx_runtime.jsx)("div",{className:"mt-2",children:(0,jsx_runtime.jsx)(link_default(),{href:"/forgot-password",className:"text-xs text-primary hover:underline",tabIndex:0,"aria-label":"Forgot Password?",children:"Forgot Password?"})})]}),(0,jsx_runtime.jsx)(proxy.P.div,{variants:fadeIn,whileHover:{scale:1.01},whileTap:{scale:.98},children:(0,jsx_runtime.jsx)(ui_button.$,{type:"submit",className:"w-full gap-1 h-10 rounded-full text-base font-semibold shadow-md",disabled:isLoading,"aria-label":"Sign In",children:isLoading?"Signing In...":(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(log_in.A,{className:"h-4 w-4"}),primaryButtonText]})})}),localError&&(0,jsx_runtime.jsxs)(proxy.P.div,{variants:fadeIn,className:"text-destructive text-sm mt-2 text-center",role:"alert","aria-live":"polite",children:[(0,jsx_runtime.jsx)("div",{children:localError}),retryCount>0&&!localError.includes("Invalid email or password")&&(0,jsx_runtime.jsx)(ui_button.$,{variant:"link",size:"sm",className:"px-0 text-primary hover:underline",onClick:async()=>{setLocalError(null);try{await refreshSession(),await signIn(email,password),onSuccess&&onSuccess()}catch(error){login_form_console.error("Retry login error:",error),setLocalError("Login retry failed. Please check your network connection and try again."),toast({title:"Authentication Error",description:"Login failed after retry. Please try again later.",variant:"destructive"})}},disabled:isLoading,children:"Try again with a network refresh"})]})]})]})}LoginForm.__docgenInfo={description:"",methods:[],displayName:"LoginForm",props:{onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Optional callback function to call when login is successful"},primaryButtonText:{required:!1,tsType:{name:"string"},description:"Optional custom text for the primary button",defaultValue:{value:"'Sign In'",computed:!1}},context:{required:!1,tsType:{name:"AuthModalContext"},description:"Optional context for analytics and customization",defaultValue:{value:"'default'",computed:!1}}}};var react_visually_hidden_dist=__webpack_require__("./node_modules/@radix-ui/react-visually-hidden/dist/index.mjs");__webpack_require__("./node_modules/console-browserify/index.js");const AuthModalContext=(0,react.createContext)({isOpen:!1,context:"default",abTestVariant:"control",redirectPath:null,open:()=>{},close:()=>{},setABTestVariant:()=>{},trackEvent:()=>{}}),useAuthModal=()=>(0,react.useContext)(AuthModalContext);const defaultContent={title:"sign in to withme.travel",description:"unlock all features and continue your journey",primaryButtonText:"sign in",features:[{icon:"clipboard",title:"no more spreadsheet chaos",description:"finally, a place to organize everything without endless excel tabs and google docs"},{icon:"users",title:"everyone's actually involved",description:"share ideas, vote on plans, and keep the whole crew in sync"}]},contextContent={default:defaultContent,"join-group":{title:"join this group",description:"sign in to join the group and collaborate on trip plans",primaryButtonText:"join group",features:[{icon:"users",title:"plan together",description:"collaborate with friends in real-time on your upcoming adventure"},{icon:"messageSquare",title:"share your ideas",description:"contribute suggestions and vote on group decisions"}]},"create-group":{title:"create your group",description:"sign in to create a group and invite friends",primaryButtonText:"create group",features:[{icon:"userPlus",title:"bring everyone together",description:"invite friends and family to join your travel planning"},{icon:"map",title:"start mapping your adventure",description:"begin plotting your journey with collaborative tools"}]},"save-trip":{title:"save this trip",description:"sign in to save this trip to your collection",primaryButtonText:"save trip",features:[{icon:"bookmark",title:"build your trip collection",description:"save trips for inspiration and future planning"},{icon:"edit",title:"customize any time",description:"edit and personalize saved trips to fit your style"}]},"like-trip":{title:"like this trip",description:"sign in to like this trip and save it for later",primaryButtonText:"like trip",features:[{icon:"heart",title:"show your appreciation",description:"like trips that inspire you and support creators"},{icon:"list",title:"curate your favorites",description:"build a collection of trips you love for future reference"}]},comment:{title:"join the conversation",description:"sign in to leave a comment and collaborate",primaryButtonText:"comment",features:[{icon:"messageCircle",title:"share your thoughts",description:"add helpful insights and ask questions"},{icon:"bell",title:"stay in the loop",description:"get notified when others respond to your comments"}]},"edit-trip":{title:"edit this trip",description:"sign in to make changes to this trip",primaryButtonText:"edit trip",features:[{icon:"edit2",title:"personalize your journey",description:"customize itineraries to match your preferences"},{icon:"share2",title:"collaborate with others",description:"invite friends to help fine-tune your plans"}]},"invite-friends":{title:"invite your friends",description:"sign in to invite friends to join your trip",primaryButtonText:"invite friends",features:[{icon:"userPlus",title:"bring the crew together",description:"easily invite friends via email or sharing a link"},{icon:"lock",title:"control who has access",description:"manage permissions for who can view or edit your trip"}]},"premium-feature":{title:"unlock premium features",description:"sign in to access advanced planning tools",primaryButtonText:"continue",features:[{icon:"star",title:"premium planning tools",description:"access advanced features for better trip organization"},{icon:"save",title:"unlimited trip storage",description:"save all your trip ideas without limitations"}]},"vote-on-idea":{title:"vote on this idea",description:"sign in to cast your vote and help make decisions",primaryButtonText:"vote now",features:[{icon:"thumbsUp",title:"have your say",description:"influence group decisions with your vote"},{icon:"pieChart",title:"see what others think",description:"view voting results and popular opinions"}]},"create-itinerary":{title:"create an itinerary",description:"sign in to build a detailed travel plan",primaryButtonText:"create itinerary",features:[{icon:"calendar",title:"organize your days",description:"plan day-by-day activities for a seamless experience"},{icon:"mapPin",title:"map your destinations",description:"visualize your route with interactive maps"}]},"add-to-itinerary":{title:"add to your itinerary",description:"sign in to add this to your trip plan",primaryButtonText:"add to plan",features:[{icon:"plus",title:"build your perfect day",description:"add activities, restaurants, and attractions to your schedule"},{icon:"clock",title:"optimize your time",description:"organize your days efficiently with drag-and-drop planning"}]}},abTestVariants={control:{},"variant-a":{default:{title:"hey there, traveler!",description:"just a quick sign-in to keep your travel dreams alive",primaryButtonText:"let's go"},"join-group":{title:"join the crew",description:"sign in real quick to join this travel squad",primaryButtonText:"count me in"},"save-trip":{title:"keep this trip in your pocket",description:"quick sign-in to bookmark this awesome itinerary",primaryButtonText:"save it for later"}},"variant-b":{default:{title:"unlock better travel planning",description:"sign in to access tools that make group trips actually happen",primaryButtonText:"start planning smarter"},"join-group":{title:"collaborate on better trips",description:"sign in to join this group and influence where you'll go",primaryButtonText:"join & contribute"},"save-trip":{title:"never lose this inspiration",description:"sign in to save and customize this trip for your future travels",primaryButtonText:"save & customize"}}};var clipboard_list=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/clipboard-list.js"),heart=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/heart.js"),users=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/users.js"),calendar=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/calendar.js"),user_plus=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/user-plus.js"),bookmark=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/bookmark.js"),star=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/star.js"),square_pen=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/square-pen.js"),share_2=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/share-2.js"),bell=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/bell.js"),lock=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/lock.js"),chart_pie=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/chart-pie.js"),message_square=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/message-square.js"),map=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/map.js"),map_pin=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/map-pin.js"),thumbs_up=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/thumbs-up.js"),plus=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/plus.js"),clock=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/clock.js"),pen=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/pen.js"),save=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/save.js");const ICONS={clipboard:(0,jsx_runtime.jsx)(clipboard_list.A,{className:"h-6 w-6 text-primary mt-1"}),heart:(0,jsx_runtime.jsx)(heart.A,{className:"h-6 w-6 text-primary mt-1"}),users:(0,jsx_runtime.jsx)(users.A,{className:"h-6 w-6 text-primary mt-1"}),messageCircle:(0,jsx_runtime.jsx)(message_circle.A,{className:"h-6 w-6 text-primary mt-1"}),calendar:(0,jsx_runtime.jsx)(calendar.A,{className:"h-6 w-6 text-primary mt-1"}),userPlus:(0,jsx_runtime.jsx)(user_plus.A,{className:"h-6 w-6 text-primary mt-1"}),bookmark:(0,jsx_runtime.jsx)(bookmark.A,{className:"h-6 w-6 text-primary mt-1"}),star:(0,jsx_runtime.jsx)(star.A,{className:"h-6 w-6 text-primary mt-1"}),edit:(0,jsx_runtime.jsx)(square_pen.A,{className:"h-6 w-6 text-primary mt-1"}),share2:(0,jsx_runtime.jsx)(share_2.A,{className:"h-6 w-6 text-primary mt-1"}),bell:(0,jsx_runtime.jsx)(bell.A,{className:"h-6 w-6 text-primary mt-1"}),lock:(0,jsx_runtime.jsx)(lock.A,{className:"h-6 w-6 text-primary mt-1"}),pieChart:(0,jsx_runtime.jsx)(chart_pie.A,{className:"h-6 w-6 text-primary mt-1"}),messageSquare:(0,jsx_runtime.jsx)(message_square.A,{className:"h-6 w-6 text-primary mt-1"}),map:(0,jsx_runtime.jsx)(map.A,{className:"h-6 w-6 text-primary mt-1"}),mapPin:(0,jsx_runtime.jsx)(map_pin.A,{className:"h-6 w-6 text-primary mt-1"}),thumbsUp:(0,jsx_runtime.jsx)(thumbs_up.A,{className:"h-6 w-6 text-primary mt-1"}),plus:(0,jsx_runtime.jsx)(plus.A,{className:"h-6 w-6 text-primary mt-1"}),clock:(0,jsx_runtime.jsx)(clock.A,{className:"h-6 w-6 text-primary mt-1"}),edit2:(0,jsx_runtime.jsx)(pen.A,{className:"h-6 w-6 text-primary mt-1"}),save:(0,jsx_runtime.jsx)(save.A,{className:"h-6 w-6 text-primary mt-1"})};function AuthModal(){const{isOpen,context,abTestVariant,close,trackEvent}=useAuthModal(),content=function getAuthModalContent(context="default",abTestVariant="control"){var _abTestVariants_abTestVariant;return{...contextContent[context]||defaultContent,...(null===(_abTestVariants_abTestVariant=abTestVariants[abTestVariant])||void 0===_abTestVariants_abTestVariant?void 0:_abTestVariants_abTestVariant[context])||{}}}(context,abTestVariant);(0,react.useEffect)((()=>{isOpen&&trackEvent("auth_modal_viewed",{context,abTestVariant,content:{title:content.title,description:content.description}})}),[isOpen,context,abTestVariant,content,trackEvent]);return(0,jsx_runtime.jsx)(dialog.lG,{open:isOpen,onOpenChange:close,children:(0,jsx_runtime.jsxs)(dialog.Cf,{className:"sm:max-w-[800px] p-0 gap-0 overflow-hidden",children:[(0,jsx_runtime.jsx)(react_visually_hidden_dist.s6,{children:(0,jsx_runtime.jsx)(dialog.L3,{children:"Sign in to withme.travel"})}),(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[(0,jsx_runtime.jsxs)("div",{className:"bg-gradient-to-br from-teal-500/20 via-primary/20 to-purple-500/20 p-8",children:[(0,jsx_runtime.jsx)("h2",{className:"text-2xl font-bold mb-4",children:content.title}),(0,jsx_runtime.jsx)("p",{className:"mb-8",children:content.description}),content.features&&0!==content.features.length?(0,jsx_runtime.jsx)("div",{className:"space-y-6",children:content.features.map(((feature,index)=>(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-3",children:[ICONS[feature.icon]||(0,jsx_runtime.jsx)(users.A,{className:"h-6 w-6 text-primary mt-1"}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-medium mb-1",children:feature.title}),(0,jsx_runtime.jsx)("p",{className:"text-sm text-muted-foreground",children:feature.description})]})]},index)))}):null]}),(0,jsx_runtime.jsx)("div",{className:"p-8 flex items-center justify-center",children:(0,jsx_runtime.jsx)("div",{className:"w-full max-w-sm",children:(0,jsx_runtime.jsx)(LoginForm,{onSuccess:()=>{trackEvent("auth_modal_login_success",{context,abTestVariant}),close()},primaryButtonText:content.primaryButtonText,context})})})]})]})})}function AuthModalWithProps({isOpen,onClose}){const{open,close}=useAuthModal();return(0,react.useEffect)((()=>{isOpen?open("default"):close()}),[isOpen,open,close]),null}AuthModal.__docgenInfo={description:"",methods:[],displayName:"AuthModal"};var skeleton=__webpack_require__("./components/ui/skeleton.tsx"),idea_comments_console=__webpack_require__("./node_modules/console-browserify/index.js");function IdeaComments({ideaId,userId,className="",isAuthenticated,groupId}){const{comments,totalComments,hasMore,isLoading,error,loadMore,refresh,addComment,updateComment,deleteComment,getReplies,getReactions,addReaction,removeReaction}=function useComments({contentType,contentId,initialLimit=20}){const[comments,setComments]=(0,react.useState)([]),[totalComments,setTotalComments]=(0,react.useState)(0),[hasMore,setHasMore]=(0,react.useState)(!1),[nextCursor,setNextCursor]=(0,react.useState)(void 0),[isLoading,setIsLoading]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),fetchComments=(0,react.useCallback)((async(offset=0,limit=initialLimit)=>{setIsLoading(!0),setError(null);try{let response;if("group_idea"===contentType){const queryParams=new URLSearchParams({ideaId:contentId,limit:limit.toString(),offset:offset.toString()});response=await fetch(`/api/group-plan-idea-comments?${queryParams.toString()}`)}else{const queryParams=new URLSearchParams({contentType,contentId,limit:limit.toString(),offset:offset.toString()});response=await fetch(`/api/comments?${queryParams.toString()}`)}if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to fetch comments")}return await response.json()}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while fetching comments";return setError(errorMessage),null}finally{setIsLoading(!1)}}),[contentType,contentId,initialLimit]),loadInitialComments=(0,react.useCallback)((async()=>{const data=await fetchComments();data&&(setComments(data.comments),setTotalComments(data.total),setHasMore(data.has_more),setNextCursor(data.next_cursor))}),[fetchComments]),loadMore=(0,react.useCallback)((async()=>{if(!hasMore||!nextCursor)return;const offset=parseInt(nextCursor,10),data=await fetchComments(offset);data&&(setComments((prevComments=>[...prevComments,...data.comments])),setHasMore(data.has_more),setNextCursor(data.next_cursor))}),[fetchComments,hasMore,nextCursor]),refresh=(0,react.useCallback)((async()=>{await loadInitialComments()}),[loadInitialComments]),addComment=(0,react.useCallback)((async(content,parentId)=>{setError(null);try{let response;if("group_idea"===contentType){const userId=window.localStorage.getItem("user_id");response=await fetch("/api/group-plan-idea-comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content,idea_id:contentId,parent_id:parentId||null,user_id:userId})})}else response=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content,content_type:contentType,content_id:contentId,parent_id:parentId||null})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to add comment")}const newComment=await response.json();return parentId||(setComments((prevComments=>[newComment,...prevComments])),setTotalComments((prev=>prev+1))),newComment}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while adding comment";return setError(errorMessage),(0,use_toast.oR)({title:"Comment Error",description:errorMessage,variant:"destructive"}),null}}),[contentType,contentId]),updateComment=(0,react.useCallback)((async(commentId,content)=>{setError(null);try{let response;if("group_idea"===contentType){const userId=window.localStorage.getItem("user_id");response=await fetch("/api/group-plan-idea-comments",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:commentId,user_id:userId,content})})}else response=await fetch(`/api/comments/${commentId}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to update comment")}const updatedComment="group_idea"===contentType?(await response.json()).comment:await response.json();return setComments((prevComments=>prevComments.map((comment=>comment.id===commentId?updatedComment:comment)))),updatedComment}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while updating comment";return setError(errorMessage),(0,use_toast.oR)({title:"Update Error",description:errorMessage,variant:"destructive"}),null}}),[contentType]),deleteComment=(0,react.useCallback)((async commentId=>{setError(null);try{let response;if("group_idea"===contentType){const userId=window.localStorage.getItem("user_id"),params=new URLSearchParams({id:commentId,user_id:userId||""});response=await fetch(`/api/group-plan-idea-comments?${params.toString()}`,{method:"DELETE"})}else response=await fetch(`/api/comments/${commentId}`,{method:"DELETE"});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to delete comment")}return setComments((prevComments=>prevComments.map((comment=>comment.id===commentId?{...comment,is_deleted:!0,content:"[Deleted]"}:comment)))),!0}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while deleting comment";return setError(errorMessage),(0,use_toast.oR)({title:"Delete Error",description:errorMessage,variant:"destructive"}),!1}}),[contentType]),getReplies=(0,react.useCallback)((async commentId=>{setError(null);try{let response;if(response="group_idea"===contentType?await fetch(`/api/group-plan-idea-comments/${commentId}/replies`):await fetch(`/api/comments/${commentId}/replies`),!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to fetch replies")}return(await response.json()).comments}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while fetching replies";return setError(errorMessage),console.error("Error fetching replies:",errorMessage),[]}}),[contentType]),getReactions=(0,react.useCallback)((async commentId=>{setError(null);try{let response;if(response="group_idea"===contentType?await fetch(`/api/group-plan-idea-comments/${commentId}/reactions`):await fetch(`/api/comments/${commentId}/reactions`),!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to fetch reactions")}return(await response.json()).reactions||[]}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while fetching reactions";return setError(errorMessage),console.error("Error fetching reactions:",errorMessage),[]}}),[contentType]),addReaction=(0,react.useCallback)((async(commentId,emoji)=>{setError(null);try{if(!emoji||"string"!=typeof emoji)throw new Error("Invalid emoji format");let response;if("group_idea"===contentType){const userId=window.localStorage.getItem("user_id");response=await fetch("/api/group-plan-idea-reactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment_id:commentId,user_id:userId,emoji})})}else response=await fetch(`/api/comments/${commentId}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emoji})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to add reaction")}const reaction="group_idea"===contentType?(await response.json()).reaction:await response.json();return setComments((prevComments=>prevComments.map((comment=>comment.id===commentId?{...comment,reactions_count:(comment.reactions_count||0)+1}:comment)))),reaction}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while adding reaction";return setError(errorMessage),console.error("Error adding reaction:",errorMessage),null}}),[contentType]),removeReaction=(0,react.useCallback)((async(commentId,emoji)=>{setError(null);try{if(!emoji||"string"!=typeof emoji)throw new Error("Invalid emoji format");let response;if("group_idea"===contentType){const userId=window.localStorage.getItem("user_id"),params=new URLSearchParams({comment_id:commentId,user_id:userId||"",emoji});response=await fetch(`/api/group-plan-idea-reactions?${params.toString()}`,{method:"DELETE"})}else response=await fetch(`/api/comments/${commentId}/reactions?emoji=${encodeURIComponent(emoji)}`,{method:"DELETE"});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to remove reaction")}return setComments((prevComments=>prevComments.map((comment=>comment.id===commentId?{...comment,reactions_count:Math.max((comment.reactions_count||1)-1,0)}:comment)))),!0}catch(err){const errorMessage=err instanceof Error?err.message:"An error occurred while removing reaction";return setError(errorMessage),console.error("Error removing reaction:",errorMessage),!1}}),[contentType]);return(0,react.useEffect)((()=>{loadInitialComments()}),[loadInitialComments]),{comments,totalComments,hasMore,isLoading,error,loadMore,refresh,addComment,updateComment,deleteComment,getReplies,getReactions,addReaction,removeReaction}}({contentType:"group_idea",contentId:ideaId}),[newComment,setNewComment]=(0,react.useState)(""),[repliesMap,setRepliesMap]=(0,react.useState)({}),[reactionsMap,setReactionsMap]=(0,react.useState)({}),[replyingTo,setReplyingTo]=(0,react.useState)(null),[editingId,setEditingId]=(0,react.useState)(null),[editContent,setEditContent]=(0,react.useState)(""),[loadingReplies,setLoadingReplies]=(0,react.useState)({}),[loadingReactions,setLoadingReactions]=(0,react.useState)({}),[authModalOpen,setAuthModalOpen]=(0,react.useState)(!1),commentInputRef=(0,react.useRef)(null),commentsEndRef=(0,react.useRef)(null),commentsContainerRef=(0,react.useRef)(null),canSubmitComment=newComment.trim().length>0&&!isLoading,getGuestToken=(0,react.useCallback)((()=>{if("undefined"==typeof document)return null;const match=document.cookie.match(/guest_group_token=([^;]+)/);return match?match[1]:null}),[]),handleSubmitComment=async e=>{if(e.preventDefault(),canSubmitComment)if(isAuthenticated)try{await addComment(newComment),setNewComment(""),setTimeout((()=>{var _commentsEndRef_current;null===(_commentsEndRef_current=commentsEndRef.current)||void 0===_commentsEndRef_current||_commentsEndRef_current.scrollIntoView({behavior:"smooth"})}),100)}catch(err){idea_comments_console.error("Error adding comment:",err)}else setAuthModalOpen(!0)},handleSubmitReply=(0,react.useCallback)((async(parentId,content)=>{if(content.trim())try{const reply=await addComment(content,parentId);reply&&setRepliesMap((prev=>({...prev,[parentId]:[reply,...prev[parentId]||[]]}))),setReplyingTo(null)}catch(err){idea_comments_console.error("Error adding reply:",err)}}),[addComment]),handleToggleReplies=(0,react.useCallback)((async commentId=>{var _repliesMap_commentId;if(!(null===(_repliesMap_commentId=repliesMap[commentId])||void 0===_repliesMap_commentId?void 0:_repliesMap_commentId.length)){setLoadingReplies((prev=>({...prev,[commentId]:!0})));try{const replies=await getReplies(commentId);setRepliesMap((prev=>({...prev,[commentId]:replies})))}catch(err){idea_comments_console.error("Error loading replies:",err)}finally{setLoadingReplies((prev=>({...prev,[commentId]:!1})))}}}),[getReplies,repliesMap]),handleAddReaction=(0,react.useCallback)((async(commentId,emoji)=>{var _reactionsMap_commentId;if(null===(_reactionsMap_commentId=reactionsMap[commentId])||void 0===_reactionsMap_commentId?void 0:_reactionsMap_commentId.some((r=>r.user_id===userId&&r.emoji===emoji))){setReactionsMap((prev=>({...prev,[commentId]:(prev[commentId]||[]).filter((r=>!(r.user_id===userId&&r.emoji===emoji)))})));try{await removeReaction(commentId,emoji)}catch(err){await getReactions(commentId).then((reactions=>{setReactionsMap((prev=>({...prev,[commentId]:reactions})))}))}}else{setReactionsMap((prev=>({...prev,[commentId]:[...prev[commentId]||[],{user_id:userId,emoji,comment_id:commentId}]})));try{await addReaction(commentId,emoji)}catch(err){idea_comments_console.error("Error adding reaction:",err),await getReactions(commentId).then((reactions=>{setReactionsMap((prev=>({...prev,[commentId]:reactions})))}))}}}),[reactionsMap,userId,removeReaction,getReactions,addReaction]),handleLoadReactions=(0,react.useCallback)((async commentId=>{if(!reactionsMap[commentId]){setLoadingReactions((prev=>({...prev,[commentId]:!0})));try{const reactions=await getReactions(commentId);setReactionsMap((prev=>({...prev,[commentId]:reactions})))}catch(err){idea_comments_console.error("Error loading reactions:",err)}finally{setLoadingReactions((prev=>({...prev,[commentId]:!1})))}}}),[getReactions,reactionsMap]),Comment=(0,react.useCallback)((({comment,isReply=!1})=>{var _repliesMap_comment_id,_comment_user,_comment_user1,_comment_user_name,_comment_user2,_comment_user3,_repliesMap_comment_id1,_repliesMap_comment_id2;const reactions=reactionsMap[comment.id]||[],isEditing=editingId===comment.id,isReplying=replyingTo===comment.id,showReplies=Boolean(null===(_repliesMap_comment_id=repliesMap[comment.id])||void 0===_repliesMap_comment_id?void 0:_repliesMap_comment_id.length);return(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("relative flex flex-col group",isReply&&"mt-1",comment.is_deleted&&"opacity-60 italic"),onMouseEnter:()=>{handleLoadReactions(comment.id)},children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-2",children:[(0,jsx_runtime.jsxs)(avatar.eu,{className:"h-7 w-7 flex-shrink-0",children:[(0,jsx_runtime.jsx)(avatar.BK,{src:(null===(_comment_user=comment.user)||void 0===_comment_user?void 0:_comment_user.avatar_url)||void 0,alt:(null===(_comment_user1=comment.user)||void 0===_comment_user1?void 0:_comment_user1.name)||"User"}),(0,jsx_runtime.jsx)(avatar.q5,{children:(null===(_comment_user2=comment.user)||void 0===_comment_user2||null===(_comment_user_name=_comment_user2.name)||void 0===_comment_user_name?void 0:_comment_user_name[0])||"?"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-xs text-gray-800 dark:text-gray-100 truncate max-w-[120px]",children:(null===(_comment_user3=comment.user)||void 0===_comment_user3?void 0:_comment_user3.name)||"Unknown"}),(0,jsx_runtime.jsx)("span",{className:"text-[10px] text-gray-400",children:"string"==typeof comment.created_at?(0,date_utils.fF)(new Date(comment.created_at)):(0,date_utils.fF)(comment.created_at)}),comment.is_edited&&(0,jsx_runtime.jsx)("span",{className:"text-[10px] text-gray-400 italic ml-1",children:"(edited)"})]}),isEditing?(0,jsx_runtime.jsxs)("form",{className:"mt-1",onSubmit:e=>{e.preventDefault(),editContent.trim()&&(updateComment(comment.id,editContent),setEditingId(null))},children:[(0,jsx_runtime.jsx)(input.p,{value:editContent,onChange:e=>setEditContent(e.target.value),className:"text-sm mb-1",autoFocus:!0}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,jsx_runtime.jsx)(ui_button.$,{type:"button",size:"sm",variant:"ghost",onClick:()=>setEditingId(null),className:"h-7 text-xs",children:"Cancel"}),(0,jsx_runtime.jsx)(ui_button.$,{type:"submit",size:"sm",className:"h-7 text-xs",disabled:!editContent.trim(),children:"Save"})]})]}):(0,jsx_runtime.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-200 whitespace-pre-line break-words",children:comment.content}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,jsx_runtime.jsx)("button",{onClick:()=>setReplyingTo(isReplying?null:comment.id),className:"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Reply"}),comment.user_id===userId&&!comment.is_deleted&&(0,jsx_runtime.jsx)("button",{onClick:()=>{setEditingId(comment.id),setEditContent(comment.content)},className:"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Edit"}),comment.user_id===userId&&!comment.is_deleted&&(0,jsx_runtime.jsx)("button",{onClick:()=>deleteComment(comment.id),className:"text-xs text-red-500 hover:text-red-700 dark:hover:text-red-300 transition-colors",children:"Delete"})]}),reactions.length>0&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap items-center gap-1 mt-1",children:[Object.entries(reactions.reduce(((acc,r)=>(acc[r.emoji]=(acc[r.emoji]||0)+1,acc)),{})).map((([emoji,count])=>{const userReacted=(emoji=>reactions.some((r=>r.user_id===userId&&r.emoji===emoji)))(emoji);return(0,jsx_runtime.jsxs)("button",{className:(0,utils.cn)("px-1.5 h-6 flex items-center gap-0.5 text-base font-medium rounded-full transition-all","border border-gray-100 bg-gray-50",userReacted?"ring-1 ring-blue-300":""),onClick:()=>handleAddReaction(comment.id,emoji),children:[(0,jsx_runtime.jsx)("span",{className:"text-sm","aria-hidden":"true",children:emoji}),(0,jsx_runtime.jsx)("span",{className:"text-[10px] text-gray-500 font-semibold",children:count})]},emoji)})),(0,jsx_runtime.jsxs)(popover.AM,{children:[(0,jsx_runtime.jsx)(popover.Wv,{asChild:!0,children:(0,jsx_runtime.jsx)(ui_button.$,{size:"icon",variant:"ghost",className:"h-6 w-6 p-0",children:(0,jsx_runtime.jsx)(smile.A,{className:"h-4 w-4 text-gray-400"})})}),(0,jsx_runtime.jsx)(popover.hl,{className:"p-2 rounded-xl shadow-lg w-[220px]",children:(0,jsx_runtime.jsxs)(dist.pP.Root,{children:[(0,jsx_runtime.jsx)(dist.pP.Search,{className:"mb-1 rounded-md px-2 py-1 text-xs"}),(0,jsx_runtime.jsx)(dist.pP.Viewport,{className:"max-h-40 overflow-y-auto",children:(0,jsx_runtime.jsx)(dist.pP.List,{className:"flex flex-wrap",components:{Emoji:({emoji,...props})=>(0,jsx_runtime.jsx)("button",{...props,className:"p-1 hover:bg-gray-100 rounded text-lg",onClick:()=>handleAddReaction(comment.id,emoji.emoji),children:emoji.emoji})}})})]})})]})]}),isReplying&&(0,jsx_runtime.jsx)("form",{className:"mt-2",onSubmit:e=>{e.preventDefault();const input=e.currentTarget.querySelector("input");input.value.trim()&&(handleSubmitReply(comment.id,input.value),input.value="")},children:(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(input.p,{placeholder:"Write a reply...",className:"pr-10 text-sm rounded-full",autoFocus:!0}),(0,jsx_runtime.jsx)("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 text-blue-500",children:(0,jsx_runtime.jsx)(send.A,{className:"h-4 w-4"})})]})}),!isReply&&(comment.replies_count||0)>0&&(0,jsx_runtime.jsx)("button",{onClick:()=>handleToggleReplies(comment.id),className:"mt-1 text-xs text-blue-500 hover:text-blue-700 transition-colors flex items-center gap-1",children:loadingReplies[comment.id]?(0,jsx_runtime.jsx)(spinner.y,{className:"h-3 w-3"}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:showReplies?"Hide replies":`Show ${comment.replies_count} ${1===comment.replies_count?"reply":"replies"}`})})]})]}),showReplies&&(0,jsx_runtime.jsxs)("div",{className:"ml-8 mt-1 border-l-2 border-gray-100 pl-2 space-y-2",children:[null===(_repliesMap_comment_id1=repliesMap[comment.id])||void 0===_repliesMap_comment_id1?void 0:_repliesMap_comment_id1.map((reply=>(0,jsx_runtime.jsx)(Comment,{comment:reply,isReply:!0},reply.id))),(comment.replies_count||0)>(null===(_repliesMap_comment_id2=repliesMap[comment.id])||void 0===_repliesMap_comment_id2?void 0:_repliesMap_comment_id2.length)&&(0,jsx_runtime.jsx)("button",{onClick:async()=>{const moreReplies=await getReplies(comment.id);setRepliesMap((prev=>({...prev,[comment.id]:[...prev[comment.id]||[],...moreReplies]})))},className:"text-xs text-blue-500 hover:text-blue-700 transition-colors",children:"Load more replies..."})]})]},comment.id)}),[reactionsMap,editingId,replyingTo,userId,repliesMap,handleLoadReactions,updateComment,deleteComment,handleAddReaction,handleSubmitReply,handleToggleReplies,loadingReplies,getReplies]);(0,react.useEffect)((()=>{navigator.platform.toUpperCase().indexOf("MAC")}),[]),(0,react.useEffect)((()=>{if(!authModalOpen&&isAuthenticated){const guestToken=getGuestToken();guestToken&&fetch("/api/guest/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({guest_token:guestToken,group_id:groupId})}).then((()=>{window.location.reload()}))}}),[authModalOpen,isAuthenticated,getGuestToken,groupId]),(0,react.useEffect)((()=>{commentsContainerRef.current&&(commentsContainerRef.current.scrollTop=commentsContainerRef.current.scrollHeight)}),[comments]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AuthModalWithProps,{isOpen:authModalOpen,onClose:()=>setAuthModalOpen(!1)}),(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("relative mt-2",className),children:(0,jsx_runtime.jsxs)("div",{className:"",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,jsx_runtime.jsxs)("div",{className:"font-semibold text-sm text-gray-700 dark:text-gray-200 flex items-center gap-1",children:[(0,jsx_runtime.jsx)(message_circle.A,{className:"h-4 w-4 text-blue-400"}),(0,jsx_runtime.jsxs)("span",{className:"font-bold text-base",children:["Comments ",(0,jsx_runtime.jsxs)("span",{children:["(",null!=totalComments?totalComments:0,")"]})]})]}),(0,jsx_runtime.jsx)(ui_button.$,{size:"icon",variant:"ghost",className:"h-7 w-7 p-0","aria-label":"Refresh comments",onClick:refresh,disabled:isLoading,children:(0,jsx_runtime.jsx)(refresh_cw.A,{className:(0,utils.cn)("h-4 w-4 text-gray-400",isLoading&&"animate-spin")})})]}),isLoading&&0===comments.length?(0,jsx_runtime.jsx)("div",{className:"flex justify-center py-4",children:(0,jsx_runtime.jsx)(spinner.y,{className:"h-6 w-6 text-blue-400"})}):(0,jsx_runtime.jsxs)("div",{className:"space-y-3",children:[0===comments.length&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-gray-400 py-4 text-center",children:"No comments yet. Be the first to comment!"}),isLoading?(0,jsx_runtime.jsx)("div",{className:"space-y-3 py-2",children:[1,2].map((i=>(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-2",children:[(0,jsx_runtime.jsx)(skeleton.E,{className:"h-7 w-7 rounded-full flex-shrink-0"}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)(skeleton.E,{className:"h-4 w-24 mb-1"}),(0,jsx_runtime.jsx)(skeleton.E,{className:"h-3 w-full"})]})]},i)))}):error?(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,jsx_runtime.jsx)("p",{className:"text-muted-foreground text-sm mb-2",children:error}),(0,jsx_runtime.jsxs)(ui_button.$,{variant:"outline",size:"sm",onClick:refresh,className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)(refresh_cw.A,{className:"h-3 w-3"})," Retry"]})]}):0===comments.length?(0,jsx_runtime.jsx)("p",{className:"text-center text-muted-foreground text-sm py-3",children:"No comments yet. Be the first!"}):(0,jsx_runtime.jsxs)("div",{className:"space-y-3 pt-2 max-h-[240px] overflow-y-auto hide-scrollbar",ref:commentsContainerRef,children:[comments.map((comment=>{var _comment_user,_comment_user1,_comment_user_name,_comment_user2,_comment_user3;return(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-2 group",children:[(0,jsx_runtime.jsxs)(avatar.eu,{className:"h-7 w-7 flex-shrink-0",children:[(0,jsx_runtime.jsx)(avatar.BK,{src:(null===(_comment_user=comment.user)||void 0===_comment_user?void 0:_comment_user.avatar_url)||void 0,alt:(null===(_comment_user1=comment.user)||void 0===_comment_user1?void 0:_comment_user1.name)||"User"}),(0,jsx_runtime.jsx)(avatar.q5,{className:"text-xs",children:(null===(_comment_user2=comment.user)||void 0===_comment_user2||null===(_comment_user_name=_comment_user2.name)||void 0===_comment_user_name?void 0:_comment_user_name[0])||"U"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium truncate",children:(null===(_comment_user3=comment.user)||void 0===_comment_user3?void 0:_comment_user3.name)||"Guest User"}),(0,jsx_runtime.jsx)("span",{className:"text-xs text-muted-foreground opacity-70",children:(0,date_utils.fF)(new Date(comment.created_at))})]}),(0,jsx_runtime.jsx)("p",{className:"text-sm break-words",children:comment.content})]})]},comment.id)})),(0,jsx_runtime.jsx)("div",{ref:commentsEndRef})]}),isLoading&&comments.length>0&&(0,jsx_runtime.jsx)("div",{className:"flex justify-center py-2",children:(0,jsx_runtime.jsx)(spinner.y,{className:"h-4 w-4 text-blue-400"})}),hasMore&&!isLoading&&(0,jsx_runtime.jsx)("div",{className:"flex justify-center mt-2",children:(0,jsx_runtime.jsx)(ui_button.$,{size:"sm",variant:"outline",onClick:loadMore,className:"text-xs h-8",children:"Load more"})}),(0,jsx_runtime.jsx)("div",{ref:commentsEndRef})]}),(0,jsx_runtime.jsx)("div",{className:"mt-3",children:(0,jsx_runtime.jsxs)("form",{onSubmit:handleSubmitComment,className:"relative flex items-center",children:[(0,jsx_runtime.jsx)(input.p,{ref:commentInputRef,value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:"Write a comment...",className:"text-sm pr-10 rounded-full bg-gray-50 border-gray-200 focus-visible:ring-blue-400 focus-visible:ring-opacity-40",disabled:isLoading,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),canSubmitComment&&handleSubmitComment(e))}}),(0,jsx_runtime.jsx)("button",{type:"submit","aria-label":"Send comment",disabled:!canSubmitComment,className:(0,utils.cn)("absolute right-3 top-1/2 -translate-y-1/2 transition-all duration-200",canSubmitComment?"text-blue-500 hover:text-blue-600":"text-gray-300 cursor-not-allowed"),children:(0,jsx_runtime.jsx)(send.A,{className:"h-4 w-4"})})]})})]})})]})}IdeaComments.__docgenInfo={description:"",methods:[],displayName:"IdeaComments",props:{ideaId:{required:!0,tsType:{name:"string"},description:""},userId:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},isAuthenticated:{required:!0,tsType:{name:"boolean"},description:""},groupId:{required:!0,tsType:{name:"string"},description:""}}};var AnimatePresence=__webpack_require__("./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs");const cardColors={destination:{accent:"border-l-[hsl(var(--travel-blue))]",bg:"bg-gradient-to-br from-[hsl(var(--travel-blue)/0.05)] to-background dark:from-[hsl(var(--travel-blue)/0.12)] dark:to-background",hover:"hover:border-[hsl(var(--travel-blue))] hover:shadow-[0_4px_18px_rgba(0,100,255,0.12)]"},date:{accent:"border-l-[hsl(var(--travel-yellow))]",bg:"bg-gradient-to-br from-[hsl(var(--travel-yellow)/0.05)] to-background dark:from-[hsl(var(--travel-yellow)/0.12)] dark:to-background",hover:"hover:border-[hsl(var(--travel-yellow))] hover:shadow-[0_4px_18px_rgba(255,200,0,0.12)]"},activity:{accent:"border-l-[hsl(var(--travel-mint))]",bg:"bg-gradient-to-br from-[hsl(var(--travel-mint)/0.05)] to-background dark:from-[hsl(var(--travel-mint)/0.12)] dark:to-background",hover:"hover:border-[hsl(var(--travel-mint))] hover:shadow-[0_4px_18px_rgba(0,200,100,0.12)]"},budget:{accent:"border-l-[hsl(var(--travel-peach))]",bg:"bg-gradient-to-br from-[hsl(var(--travel-peach)/0.05)] to-background dark:from-[hsl(var(--travel-peach)/0.12)] dark:to-background",hover:"hover:border-[hsl(var(--travel-peach))] hover:shadow-[0_4px_18px_rgba(255,150,50,0.12)]"},other:{accent:"border-l-[hsl(var(--travel-purple))]",bg:"bg-gradient-to-br from-[hsl(var(--travel-purple)/0.05)] to-background dark:from-[hsl(var(--travel-purple)/0.12)] dark:to-background",hover:"hover:border-[hsl(var(--travel-purple))] hover:shadow-[0_4px_18px_rgba(150,50,255,0.12)]"}},CommentsSection=({idea,commentCount})=>(0,jsx_runtime.jsx)("div",{className:"idea-card-comments mt-2",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between text-sm text-muted-foreground hover:text-foreground/80 transition-colors",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,jsx_runtime.jsx)(message_circle.A,{className:"h-3.5 w-3.5",strokeWidth:1.5}),commentCount>0?(0,jsx_runtime.jsx)("span",{className:"text-xs font-medium",children:commentCount}):(0,jsx_runtime.jsx)("span",{className:"text-xs",children:"Add comment"})]}),idea.updated_at&&(0,jsx_runtime.jsx)("div",{className:"text-xs text-muted-foreground/70",children:(0,date_utils.ak)(new Date(idea.updated_at))})]})}),IdeaCard=react.memo((function IdeaCard({idea,onDelete,onEdit,selected=!1,onSelect,selectedIdeasCount=0,position={columnId:"activity",index:0},onPositionChange=()=>{},userId="",isAuthenticated=!1,groupId=""}){const[isHovered,setIsHovered]=(0,react.useState)(!1),[showComments,setShowComments]=(0,react.useState)(!1),[showEmojiPicker,setShowEmojiPicker]=(0,react.useState)(!1),[reactions,setReactions]=(0,react.useState)([]),cardRef=(0,react.useRef)(null),[editingTitle,setEditingTitle]=(0,react.useState)(!1),[titleValue,setTitleValue]=(0,react.useState)(idea.title),[linkPopoverOpen,setLinkPopoverOpen]=(0,react.useState)(!1),[linkInput,setLinkInput]=(0,react.useState)(idea.link||""),[linkMeta,setLinkMeta]=(0,react.useState)(idea.link_meta||null),[linkLoading,setLinkLoading]=(0,react.useState)(!1),[linkError,setLinkError]=(0,react.useState)("");if(!idea)return(0,jsx_runtime.jsx)("div",{className:"bg-red-100 text-red-600 p-2 rounded",children:"Missing idea data"});const cardStyle=(type=>{const colorSet=cardColors[type]||cardColors.other;return{accent:colorSet.accent,bg:colorSet.bg,hover:colorSet.hover}})(idea.type);return(0,jsx_runtime.jsxs)(proxy.P.div,{className:"idea-card-container flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[(0,jsx_runtime.jsx)(card.Zp,{ref:cardRef,className:(0,utils.cn)("idea-card relative border border-border/50 dark:border-border/30 shadow-sm backdrop-blur-sm","rounded-xl p-3 min-h-[90px] transition-all duration-300","cursor-grab active:cursor-grabbing overflow-visible",cardStyle.bg,cardStyle.accent,cardStyle.hover,"border-l-4",selected?"ring-2 ring-[hsl(var(--travel-blue))] dark:ring-[hsl(var(--travel-blue))/0.7]":"",isHovered?"shadow-md scale-[1.02] translate-y-[-2px]":""),onMouseEnter:()=>setIsHovered(!0),onMouseLeave:()=>setIsHovered(!1),children:(0,jsx_runtime.jsxs)(card.Wu,{className:"p-0 pb-0 h-full flex flex-col",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1 min-w-0",children:(0,jsx_runtime.jsxs)("h3",{className:(0,utils.cn)("font-medium text-sm leading-snug break-words"),children:[function getEmoji(type){switch(type){case"destination":return"";case"date":return"";case"activity":return"";case"budget":return"";case"question":return"";case"note":return"";case"place":return"";default:return""}}(idea.type)," ",idea.title]})}),(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-1 flex-shrink-0",children:(0,jsx_runtime.jsxs)(dropdown_menu.rI,{children:[(0,jsx_runtime.jsx)(dropdown_menu.ty,{asChild:!0,children:(0,jsx_runtime.jsx)(ui_button.$,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 rounded-full hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-colors duration-200",children:(0,jsx_runtime.jsx)(ellipsis_vertical.A,{className:"h-3.5 w-3.5 text-muted-foreground",strokeWidth:1.5})})}),(0,jsx_runtime.jsxs)(dropdown_menu.SQ,{align:"end",sideOffset:4,className:"min-w-[140px] p-1",children:[(0,jsx_runtime.jsxs)(dropdown_menu._2,{onSelect:onEdit,className:"flex items-center gap-2 text-sm py-1.5 px-2 rounded-md",children:[(0,jsx_runtime.jsx)(pencil.A,{className:"h-3.5 w-3.5",strokeWidth:1.5}),(0,jsx_runtime.jsx)("span",{children:"Edit"})]}),(0,jsx_runtime.jsxs)(dropdown_menu._2,{onSelect:onDelete,className:"flex items-center gap-2 text-sm py-1.5 px-2 rounded-md text-destructive dark:text-red-400",children:[(0,jsx_runtime.jsx)(x.A,{className:"h-3.5 w-3.5",strokeWidth:1.5}),(0,jsx_runtime.jsx)("span",{children:"Delete"})]})]})]})})]}),idea.description&&(0,jsx_runtime.jsx)("div",{className:"text-sm text-muted-foreground mt-1 mb-2",children:idea.description}),(0,jsx_runtime.jsx)("div",{className:"mt-auto",children:(0,jsx_runtime.jsx)(CommentsSection,{idea,commentCount:idea.comment_count||0})})]})}),(0,jsx_runtime.jsx)(AnimatePresence.N,{children:showComments&&(0,jsx_runtime.jsx)(proxy.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"overflow-hidden",children:(0,jsx_runtime.jsx)("div",{className:"pt-1.5",children:(0,jsx_runtime.jsx)(IdeaComments,{ideaId:idea.id,groupId,userId,isAuthenticated})})})})]})})),idea_card=IdeaCard;IdeaCard.__docgenInfo={description:"",methods:[],displayName:"IdeaCard",props:{idea:{required:!0,tsType:{name:"GroupIdea"},description:""},onDelete:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onEdit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},selected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},selectedIdeasCount:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},position:{required:!1,tsType:{name:"signature",type:"object",raw:"{\n  columnId: ColumnId;\n  index: number;\n}",signature:{properties:[{key:"columnId",value:{name:"union",raw:"'destination' | 'date' | 'activity' | 'budget' | 'other'",elements:[{name:"literal",value:"'destination'"},{name:"literal",value:"'date'"},{name:"literal",value:"'activity'"},{name:"literal",value:"'budget'"},{name:"literal",value:"'other'"}],required:!0}},{key:"index",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ columnId: 'activity', index: 0 }",computed:!1}},onPositionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(position: IdeaPosition) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  columnId: ColumnId;\n  index: number;\n}",signature:{properties:[{key:"columnId",value:{name:"union",raw:"'destination' | 'date' | 'activity' | 'budget' | 'other'",elements:[{name:"literal",value:"'destination'"},{name:"literal",value:"'date'"},{name:"literal",value:"'activity'"},{name:"literal",value:"'budget'"},{name:"literal",value:"'other'"}],required:!0}},{key:"index",value:{name:"number",required:!0}}]}},name:"position"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},userId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},isAuthenticated:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},groupId:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}}},"./app/groups/[id]/plans/[slug]/utils/date-utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ak:()=>formatTimeAgo,fF:()=>timeAgo});var _barrel_optimize_names_format_formatDistanceToNow_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/formatDistanceToNow.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function timeAgo(date){const dateObj="string"==typeof date||"number"==typeof date?new Date(date):date;try{return(0,_barrel_optimize_names_format_formatDistanceToNow_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_0__.m)(dateObj,{addSuffix:!0})}catch(error){return console.error("Error formatting date:",error),"Invalid date"}}function formatTimeAgo(date){const diffMs=(new Date).getTime()-date.getTime(),diffSec=Math.floor(diffMs/1e3),diffMin=Math.floor(diffSec/60),diffHrs=Math.floor(diffMin/60),diffDays=Math.floor(diffHrs/24);return diffSec<60?"just now":diffMin<60?`${diffMin}m ago`:diffHrs<24?`${diffHrs}h ago`:diffDays<7?`${diffDays}d ago`:date.toLocaleDateString(void 0,{month:"short",day:"numeric"})}},"./components/ui/dialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cf:()=>DialogContent,Es:()=>DialogFooter,L3:()=>DialogTitle,c7:()=>DialogHeader,lG:()=>Dialog,rr:()=>DialogDescription,zM:()=>DialogTrigger});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@radix-ui/react-dialog/dist/index.mjs"),_barrel_optimize_names_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lucide-react/dist/esm/icons/x.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const Dialog=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.bL,DialogTrigger=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.l9,DialogPortal=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.ZL,DialogOverlay=(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.bm,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.hJ,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",className),...props}))));DialogOverlay.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.hJ.displayName;const DialogContent=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,children,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(DialogPortal,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DialogOverlay,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.UC,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border standard-border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full","dark:bg-gradient-to-br dark:from-card dark:to-black/90 dark:border-border/20",className),"aria-modal":"true",role:"dialog",...props,children:[children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.A,{className:"h-4 w-4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"sr-only",children:"Close dialog"})]})]})]})));DialogContent.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.UC.displayName;const DialogHeader=({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col space-y-1.5 text-center sm:text-left",className),...props});DialogHeader.displayName="DialogHeader";const DialogFooter=({className,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",className),...props});DialogFooter.displayName="DialogFooter";const DialogTitle=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.hE,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-lg font-semibold leading-none tracking-tight",className),...props})));DialogTitle.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.hE.displayName;const DialogDescription=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.VY,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)("text-sm text-muted-foreground",className),...props})));DialogDescription.displayName=_radix_ui_react_dialog__WEBPACK_IMPORTED_MODULE_3__.VY.displayName,DialogOverlay.__docgenInfo={description:"",methods:[]},DialogContent.__docgenInfo={description:'Content component for the Dialog.\nManages focus and keyboard navigation for accessibility.\n\n@example\n<Dialog>\n  <DialogTrigger>Open dialog</DialogTrigger>\n  <DialogContent>\n    <DialogHeader>\n      <DialogTitle>Dialog title</DialogTitle>\n      <DialogDescription>Dialog description with context for screen readers.</DialogDescription>\n    </DialogHeader>\n    <div>Dialog content goes here</div>\n    <DialogFooter>\n      <Button variant="outline" onClick={() => setOpen(false)}>Cancel</Button>\n      <Button onClick={handleAction}>Continue</Button>\n    </DialogFooter>\n  </DialogContent>\n</Dialog>',methods:[]},DialogHeader.__docgenInfo={description:"Header section for the dialog, typically containing the title and description.",methods:[],displayName:"DialogHeader"},DialogFooter.__docgenInfo={description:"Footer section for the dialog, typically containing action buttons.",methods:[],displayName:"DialogFooter"},DialogTitle.__docgenInfo={description:"Title component for the dialog.\nConnected to the DialogDescription for proper ARIA relationships.",methods:[]},DialogDescription.__docgenInfo={description:"Description component for the dialog.\nProvides contextual information for screen readers.",methods:[]}},"./components/ui/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>Input});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const inputVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("flex h-10 w-full border bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",{variants:{variant:{default:"border-input","travel-purple":"border-travel-purple focus-visible:ring-travel-purple","travel-blue":"border-travel-blue focus-visible:ring-travel-blue","travel-pink":"border-travel-pink focus-visible:ring-travel-pink","travel-yellow":"border-travel-yellow focus-visible:ring-travel-yellow","travel-mint":"border-travel-mint focus-visible:ring-travel-mint","travel-peach":"border-travel-peach focus-visible:ring-travel-peach",success:"border-emerald-500 focus-visible:ring-emerald-500",warning:"border-amber-400 focus-visible:ring-amber-400",info:"border-blue-500 focus-visible:ring-blue-500",error:"border-red-500 focus-visible:ring-red-500"},radius:{sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full",none:"rounded-none"}},defaultVariants:{variant:"default",radius:"md"}}),Input=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,variant,radius,type,hasError,helperTextId,required,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(inputVariants({variant:hasError?"error":variant,radius,className})),ref,"aria-describedby":props["aria-describedby"]&&helperTextId?`${props["aria-describedby"]} ${helperTextId}`:helperTextId||props["aria-describedby"],"aria-invalid":!!hasError||void 0,"aria-required":!!required||void 0,required,...props})));Input.displayName="Input",Input.__docgenInfo={description:'Accessible Input component with design system variants.\n\n@example\n<div>\n  <Label htmlFor="email" id="email-label">Email address</Label>\n  <Input\n    id="email"\n    type="email"\n    variant="travel-purple"\n    radius="lg"\n    aria-labelledby="email-label"\n    helperTextId="email-help"\n    required\n  />\n  <p id="email-help" className="text-sm text-muted-foreground">We\'ll never share your email.</p>\n</div>',methods:[],displayName:"Input",props:{helperTextId:{required:!1,tsType:{name:"string"},description:"ID of helper text element that describes this input"},hasError:{required:!1,tsType:{name:"boolean"},description:"Whether this input is in an error state"},required:{required:!1,tsType:{name:"boolean"},description:"Whether the input is required"}},composes:["VariantProps"]}},"./components/ui/label.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>Label});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@radix-ui/react-label/dist/index.mjs"),class_variance_authority__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./lib/utils.ts");const labelVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_3__.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label=react__WEBPACK_IMPORTED_MODULE_1__.forwardRef((({className,...props},ref)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_4__.b,{ref,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(labelVariants(),className),...props})));Label.displayName=_radix_ui_react_label__WEBPACK_IMPORTED_MODULE_4__.b.displayName,Label.__docgenInfo={description:"",methods:[]}},"./components/ui/skeleton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Skeleton});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./lib/utils.ts");const skeletonVariants=(0,__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs").F)("motion-safe:animate-pulse",{variants:{color:{default:"bg-muted","travel-purple":"bg-travel-purple/20","travel-blue":"bg-travel-blue/20","travel-pink":"bg-travel-pink/20","travel-yellow":"bg-travel-yellow/20","travel-mint":"bg-travel-mint/20","travel-peach":"bg-travel-peach/20"},radius:{sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full",none:"rounded-none"}},defaultVariants:{color:"default",radius:"md"}});function Skeleton({className,color="default",radius="md",...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.cn)(skeletonVariants({color,radius,className})),...props})}Skeleton.__docgenInfo={description:'Skeleton component with design system variants.\n\n@example\n<Skeleton color="travel-purple" radius="lg" />',methods:[],displayName:"Skeleton",props:{color:{defaultValue:{value:"'default'",computed:!1},required:!1},radius:{defaultValue:{value:"'md'",computed:!1},required:!1}},composes:["DivProps","VariantProps"]}},"./components/ui/use-toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{dj:()=>useToast,oR:()=>toast});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");let count=0;const toastTimeouts=new Map,addToRemoveQueue=toastId=>{if(toastTimeouts.has(toastId))return;const timeout=setTimeout((()=>{toastTimeouts.delete(toastId),dispatch({type:"REMOVE_TOAST",toastId})}),1e6);toastTimeouts.set(toastId,timeout)},reducer=(state,action)=>{switch(action.type){case"ADD_TOAST":return{...state,toasts:[action.toast,...state.toasts].slice(0,1)};case"UPDATE_TOAST":return{...state,toasts:state.toasts.map((t=>t.id===action.toast.id?{...t,...action.toast}:t))};case"DISMISS_TOAST":{const{toastId}=action;return toastId?addToRemoveQueue(toastId):state.toasts.forEach((toast=>addToRemoveQueue(toast.id))),{...state,toasts:state.toasts.map((t=>t.id===toastId||void 0===toastId?{...t,open:!1}:t))}}case"REMOVE_TOAST":return void 0===action.toastId?{...state,toasts:[]}:{...state,toasts:state.toasts.filter((t=>t.id!==action.toastId))}}},listeners=[];let memoryState={toasts:[]};function dispatch(action){memoryState=reducer(memoryState,action),listeners.forEach((listener=>listener(memoryState)))}function toast({...props}){const id=function genId(){return count=(count+1)%Number.MAX_SAFE_INTEGER,count.toString()}(),dismiss=()=>dispatch({type:"DISMISS_TOAST",toastId:id});return dispatch({type:"ADD_TOAST",toast:{...props,id,open:!0,onOpenChange:open=>{open||dismiss()}}}),{id,dismiss,update:props=>dispatch({type:"UPDATE_TOAST",toast:{...props,id}})}}function useToast(){const[state,setState]=react__WEBPACK_IMPORTED_MODULE_0__.useState(memoryState);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>(listeners.push(setState),()=>{const index=listeners.indexOf(setState);index>-1&&listeners.splice(index,1)})),[state]),{...state,toast,dismiss:toastId=>dispatch({type:"DISMISS_TOAST",toastId})}}}}]);